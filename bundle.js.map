{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://fractalswebgl/./node_modules/promise-worker/index.js","webpack://fractalswebgl/webpack/bootstrap","webpack://fractalswebgl/webpack/runtime/compat get default export","webpack://fractalswebgl/webpack/runtime/define property getters","webpack://fractalswebgl/webpack/runtime/get javascript chunk filename","webpack://fractalswebgl/webpack/runtime/global","webpack://fractalswebgl/webpack/runtime/hasOwnProperty shorthand","webpack://fractalswebgl/webpack/runtime/publicPath","webpack://fractalswebgl/webpack/runtime/jsonp chunk loading","webpack://fractalswebgl/./node_modules/gl-matrix/esm/common.js","webpack://fractalswebgl/./src/js/colourMapData.js","webpack://fractalswebgl/./src/js/colourMaps.js","webpack://fractalswebgl/./src/js/index.js","webpack://fractalswebgl/./src/js/constants.js","webpack://fractalswebgl/./node_modules/gl-matrix/esm/mat4.js"],"sourcesContent":["'use strict'\n\nvar messageIds = 0\n\nfunction onMessage (self, e) {\n  var message = e.data\n  if (!Array.isArray(message) || message.length < 2) {\n    // Ignore - this message is not for us.\n    return\n  }\n  var messageId = message[0]\n  var error = message[1]\n  var result = message[2]\n\n  var callback = self._callbacks[messageId]\n\n  if (!callback) {\n    // Ignore - user might have created multiple PromiseWorkers.\n    // This message is not for us.\n    return\n  }\n\n  delete self._callbacks[messageId]\n  callback(error, result)\n}\n\nfunction PromiseWorker (worker) {\n  var self = this\n  self._worker = worker\n  self._callbacks = {}\n\n  worker.addEventListener('message', function (e) {\n    onMessage(self, e)\n  })\n}\n\nPromiseWorker.prototype.postMessage = function (userMessage) {\n  var self = this\n  var messageId = messageIds++\n\n  var messageToSend = [messageId, userMessage]\n\n  return new Promise(function (resolve, reject) {\n    self._callbacks[messageId] = function (error, result) {\n      if (error) {\n        return reject(new Error(error.message))\n      }\n      resolve(result)\n    }\n\n    /* istanbul ignore if */\n    if (typeof self._worker.controller !== 'undefined') {\n      // service worker, use MessageChannels because e.source is broken in Chrome < 51:\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=543198\n      var channel = new MessageChannel()\n      channel.port1.onmessage = function (e) {\n        onMessage(self, e)\n      }\n      self._worker.controller.postMessage(messageToSend, [channel.port2])\n    } else {\n      // web worker\n      self._worker.postMessage(messageToSend)\n    }\n  })\n}\n\nmodule.exports = PromiseWorker\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t296: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","const JET_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0, 0],\n    [0.35, 0, 0],\n    [0.66, 1, 1],\n    [0.89, 1, 1],\n    [1, 0.5, 0.5],\n  ],\n  green: [\n    [0, 0, 0],\n    [0.125, 0, 0],\n    [0.375, 1, 1],\n    [0.64, 1, 1],\n    [0.91, 0, 0],\n    [1, 0, 0],\n  ],\n  blue: [\n    [0, 0.5, 0.5],\n    [0.11, 1, 1],\n    [0.34, 1, 1],\n    [0.65, 0, 0],\n    [1, 0, 0],\n  ],\n};\n\nconst HOT_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0.0416, 0.0416],\n    [0.365079, 1.0, 1.0],\n    [1, 1, 1],\n  ],\n  green: [\n    [0, 0, 0],\n    [0.365079, 0.0, 0.0],\n    [0.746032, 1.0, 1.0],\n    [1, 1, 1],\n  ],\n  blue: [\n    [0, 0, 0],\n    [0.746032, 0.0, 0.0],\n    [1, 1, 1],\n  ],\n};\n\nconst GIST_STERN_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0, 0],\n    [0.0547, 1, 1],\n    [0.25, 0.027, 0.25],\n    [1, 1, 1],\n  ],\n  green: [\n    [0, 0, 0],\n    [1, 0, 0],\n  ],\n  blue: [\n    [0, 0, 0],\n    [0.5, 1, 1],\n    [0.735, 0, 0],\n    [1, 0, 0],\n  ],\n};\n\nconst gnuplotPaletteFunctions = [\n  /* 0  */ () => 0,\n  /* 1  */ () => 0.5,\n  /* 2  */ () => 1,\n  /* 3  */ (x) => x,\n  /* 4  */ (x) => Math.pow(x, 2),\n  /* 5  */ (x) => Math.pow(x, 3),\n  /* 6  */ (x) => Math.pow(x, 4),\n  /* 7  */ (x) => Math.sqrt(x),\n  /* 8  */ (x) => Math.sqrt(Math.sqrt(x)),\n  /* 9  */ (x) => Math.sin((x * Math.PI) / 2),\n  /* 10 */ (x) => Math.cos((x * Math.PI) / 2),\n  /* 11 */ (x) => Math.abs(x - 0.5),\n  /* 12 */ (x) => Math.pow(2 * x - 1, 2),\n  /* 13 */ (x) => Math.sin(x * Math.PI),\n  /* 14 */ (x) => Math.abs(Math.cos(x * Math.PI)),\n  /* 15 */ (x) => Math.sin(x * 2 * Math.PI),\n  /* 16 */ (x) => Math.cos(x * 2 * Math.PI),\n  /* 17 */ (x) => Math.abs(Math.sin(x * 2 * Math.PI)),\n  /* 18 */ (x) => Math.abs(Math.cos(x * 2 * Math.PI)),\n  /* 19 */ (x) => Math.abs(Math.sin(x * 4 * Math.PI)),\n  /* 20 */ (x) => Math.abs(Math.cos(x * 4 * Math.PI)),\n  /* 21 */ (x) => 3 * x,\n  /* 22 */ (x) => 3 * x - 1,\n  /* 23 */ (x) => 3 * x - 2,\n  /* 24 */ (x) => Math.abs(3 * x - 1),\n  /* 25 */ (x) => Math.abs(3 * x - 2),\n  /* 26 */ (x) => (3 * x - 1) / 2,\n  /* 27 */ (x) => (3 * x - 2) / 2,\n  /* 28 */ (x) => Math.abs((3 * x - 1) / 2),\n  /* 29 */ (x) => Math.abs((3 * x - 2) / 2),\n  /* 30 */ (x) => x / 0.32 - 0.78125,\n  /* 31 */ (x) => 2 * x - 0.84,\n  /* 32 */ (x) =>\n    x < 0.25 ? 4 * x : x < 0.92 ? -2 * x + 1.84 : x / 0.08 - 11.5,\n  /* 33 */ (x) => Math.abs(2 * x - 0.5),\n  /* 34 */ (x) => 2 * x,\n  /* 35 */ (x) => 2 * x - 0.5,\n  /* 36 */ (x) => 2 * x - 1,\n];\n\n// https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/_cm.py\n// https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/colors.py\n\n// const OCEAN_DATA = {\n//   usesFuncs: true,\n//   red: gnuplotPaletteFunctions[23],\n//   green: gnuplotPaletteFunctions[28],\n//   blue: gnuplotPaletteFunctions[3]\n// }\n\n// const RAINBOW_DATA = {\n//   usesFuncs: true,\n//   red: gnuplotPaletteFunctions[33],\n//   green: gnuplotPaletteFunctions[13],\n//   blue: gnuplotPaletteFunctions[10]\n// }\n\nconst GNUPLOT_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[7],\n  green: gnuplotPaletteFunctions[5],\n  blue: gnuplotPaletteFunctions[15],\n};\n\nconst GNUPLOT2_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[30],\n  green: gnuplotPaletteFunctions[31],\n  blue: gnuplotPaletteFunctions[32],\n};\n\nconst AFMHOT_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[34],\n  green: gnuplotPaletteFunctions[35],\n  blue: gnuplotPaletteFunctions[36],\n};\n\nexport const colourMapDictionary = {\n  jet: JET_DATA,\n  hot: HOT_DATA,\n  gist_stern: GIST_STERN_DATA,\n  gnuplot: GNUPLOT_DATA,\n  gnuplot2: GNUPLOT2_DATA,\n  afmhot: AFMHOT_DATA,\n};\n","import { colourMapDictionary } from \"./colourMapData\";\n\nconst flatten = (xss) => xss.reduce((acc, xs) => acc.concat(xs), []);\n\nconst N = 256;\n\nconst WHITE = [1, 1, 1, 1];\nconst BLACK = [0, 0, 0, 1];\nconst MONOCHROME_COLOUR_MAP = flatten(\n  Array(N - 4)\n    .fill(WHITE)\n    .concat(Array(4).fill(BLACK))\n);\n\nexport const getColourMap = (name) => {\n  const data = colourMapDictionary[name];\n  if (data) {\n    return getColourMapRgbaValues(data, N);\n  }\n  switch (name) {\n    case \"monochrome\":\n      return MONOCHROME_COLOUR_MAP;\n    default:\n      console.error(`ERROR: unknown colour map name, '${name}'.`);\n      return MONOCHROME_COLOUR_MAP;\n  }\n};\n\nconst getColourMapRgbaValues = (data, n) => {\n  const makeMappingArrayFunc = data.usesFuncs\n    ? makeMappingArray2\n    : makeMappingArray;\n  const rs = makeMappingArrayFunc(n, data.red);\n  const gs = makeMappingArrayFunc(n, data.green);\n  const bs = makeMappingArrayFunc(n, data.blue);\n  return flatten(rsgsbsToColourValues(n, rs, gs, bs));\n};\n\nconst rsgsbsToColourValues = (n, rs, gs, bs) => {\n  const values = Array(n);\n  for (let i = 0; i < n; i++) {\n    values[i] = [rs[i], gs[i], bs[i], 1];\n  }\n  return values;\n};\n\nconst makeMappingArray = (n, adata) => {\n  let x = adata.map((e) => e[0]);\n  const y0 = adata.map((e) => e[1]);\n  const y1 = adata.map((e) => e[2]);\n\n  x = x.map((v) => v * (n - 1));\n\n  const lut = new Array(n).fill(0);\n\n  const xind = Array.from(Array(n).keys());\n\n  let ind = searchSorted(x, xind);\n  ind = ind.slice(1, ind.length - 1);\n\n  const distance = Array.from(Array(n - 2).keys()).map((i) => {\n    const numerator = xind[i + 1] - x[ind[i] - 1];\n    const denominator = x[ind[i]] - x[ind[i] - 1];\n    return numerator / denominator;\n  });\n\n  Array.from(Array(n - 2).keys()).forEach(\n    (i) =>\n      (lut[i + 1] =\n        distance[i] * (y0[ind[i]] - y1[ind[i] - 1]) + y1[ind[i] - 1])\n  );\n\n  lut[0] = y1[0];\n\n  lut[n - 1] = y0[y0.length - 1];\n\n  return lut.map(clipZeroToOne);\n};\n\nconst searchSorted = (arr, vs) => {\n  const result = Array(vs.length);\n  const arrLen = arr.length;\n  for (let i = 0; i < vs.length; i++) {\n    const v = vs[i];\n    let added = false;\n    for (let j = 0; j < arrLen; j++) {\n      if (v <= arr[j]) {\n        result[i] = j;\n        added = true;\n        break;\n      }\n    }\n    if (!added) result[i] = arrLen;\n  }\n  return result;\n};\n\nconst makeMappingArray2 = (n, lambda) =>\n  linearSpaced(n, 0, 1).map(lambda).map(clipZeroToOne);\n\nconst linearSpaced = (length, start, stop) => {\n  const step = (stop - start) / (length - 1);\n  const data = Array(length);\n  for (let i = 0; i < data.length; i++) {\n    data[i] = start + i * step;\n  }\n  data[data.length - 1] = stop;\n  return data;\n};\n\nconst clipZeroToOne = (v) => clip(0, 1, v);\n\nconst clip = (min, max, v) => (v < min ? min : v > max ? max : v);\n","import PromiseWorker from \"promise-worker\";\nimport * as glm from \"gl-matrix\";\nimport vertexShaderSourceWebGL1 from \"../shaders/webgl1/shader.vert.glsl\";\nimport mandelbrotShaderSourceWebGL1 from \"../shaders/webgl1/mandelbrot.frag.glsl\";\nimport juliaShaderSourceWebGL1 from \"../shaders/webgl1/julia.frag.glsl\";\nimport vertexShaderSourceWebGL2 from \"../shaders/webgl2/shader.vert.glsl\";\nimport mandelbrotShaderSourceWebGL2 from \"../shaders/webgl2/mandelbrot.frag.glsl\";\nimport juliaShaderSourceWebGL2 from \"../shaders/webgl2/julia.frag.glsl\";\nimport { colourMapDictionary } from \"./colourMapData\";\nimport { getColourMap } from \"./colourMaps\";\nimport * as C from \"./constants\";\n\nconst worker = new Worker(new URL(\"./web-worker.js\", import.meta.url));\nconst promiseWorker = new PromiseWorker(worker);\n\nconst FRACTAL_SET_ID_MANDELBROT = 0;\nconst FRACTAL_SET_ID_JULIA = 1;\n\nlet canvas;\nlet gl;\n\nconst createColormapTexture = (colourMap, textureUnit) => {\n  const texture = gl.createTexture();\n  gl.activeTexture(gl.TEXTURE0 + textureUnit);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  const pixels = new Uint8Array(colourMap.map((value) => value * 255));\n  const level = 0;\n  const width = colourMap.length / 4;\n  const height = 1;\n  const border = 0;\n  gl.texImage2D(\n    gl.TEXTURE_2D,\n    level,\n    gl.RGBA,\n    width,\n    height,\n    border,\n    gl.RGBA,\n    gl.UNSIGNED_BYTE,\n    pixels\n  );\n};\n\nconst loadColourMap = (name, textureUnit) => {\n  const colourMap = getColourMap(name);\n  createColormapTexture(colourMap, textureUnit);\n  return {\n    name,\n    colourMap,\n    textureUnit,\n  };\n};\n\nconst loadColourMaps = () => {\n  const colorMapNames = Array.from(Object.keys(colourMapDictionary));\n  colorMapNames.forEach((colorMapName, index) => {\n    colourMaps.set(index, loadColourMap(colorMapName, index));\n  });\n};\n\nconst fractalSets = new Map();\nconst colourMaps = new Map();\n\nlet currentMaxIterations = C.INITIAL_ITERATIONS;\nlet currentFractalSetId = undefined;\nlet currentFractalSet = undefined;\nlet currentJuliaConstant = undefined;\nlet currentColourMapId = undefined;\nlet currentColourMap = undefined;\nlet regionBottomLeft = {};\nlet regionTopRight = {};\nlet panning = false;\nlet lastMousePt;\n\nconst INITIAL_BOOKMARK = {\n  fractalSetId: FRACTAL_SET_ID_MANDELBROT,\n  juliaConstant: { x: 0, y: 0 },\n  colourMapId: 0,\n  regionBottomLeft: { x: -0.22, y: -0.7 },\n  regionTopRight: { x: -0.21, y: -0.69 },\n  maxIterations: C.INITIAL_ITERATIONS,\n};\n\nconst HOME_BOOKMARK = {\n  fractalSetId: FRACTAL_SET_ID_MANDELBROT,\n  juliaConstant: { x: 0, y: 0 },\n  colourMapId: 0,\n  regionBottomLeft: { x: -2.25, y: -1.5 },\n  regionTopRight: { x: 0.75, y: 1.5 },\n  maxIterations: C.INITIAL_ITERATIONS,\n};\n\nlet bookmarkMode = false;\nlet nextBookmarkId = 0;\nlet bookmarks = new Map();\n\nconst initGL = (canvas) => {\n  // gl = canvas.getContext('webgl2') || canvas.getContext('webgl')\n  // I'm just using 'webgl' for the moment because I'm having problems\n  // with 'webgl2' on iPad (Safari/Chrome).\n  gl = canvas.getContext(\"webgl\");\n  if (!gl) {\n    console.error(\"Failed to initialise WebGL\");\n  }\n};\n\nconst isWebGL2 = () => gl instanceof WebGL2RenderingContext;\n\nconst getShader = (gl, source, shaderType) => {\n  const shader = gl.createShader(shaderType);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    const errorMessage = gl.getShaderInfoLog(shader);\n    console.error(`Failed to compile shader: ${errorMessage}`);\n    return null;\n  }\n  return shader;\n};\n\nconst initShadersHelper = (name, vertexShaderSource, fragmentShaderSource) => {\n  const vertexShader = getShader(gl, vertexShaderSource, gl.VERTEX_SHADER);\n  const fragmentShader = getShader(\n    gl,\n    fragmentShaderSource,\n    gl.FRAGMENT_SHADER\n  );\n  const program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    const errorMessage = gl.getProgramInfoLog(program);\n    console.error(`Could not initialise shaders: ${errorMessage}`);\n    return;\n  }\n\n  const aVertexPosition = gl.getAttribLocation(program, \"aVertexPosition\");\n  gl.enableVertexAttribArray(aVertexPosition);\n\n  const aPlotPosition = gl.getAttribLocation(program, \"aPlotPosition\");\n  gl.enableVertexAttribArray(aPlotPosition);\n\n  const uModelViewMatrix = gl.getUniformLocation(program, \"uModelViewMatrix\");\n  const uColormap = gl.getUniformLocation(program, \"uColormap\");\n  const uJuliaConstant = gl.getUniformLocation(program, \"uJuliaConstant\");\n\n  const maybeMaxIterationsUniform = isWebGL2()\n    ? { uMaxIterations: gl.getUniformLocation(program, \"uMaxIterations\") }\n    : undefined;\n\n  const vertices = [1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, -1.0];\n  const vertexPositionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0);\n\n  return {\n    name,\n    program,\n    aVertexPosition,\n    aPlotPosition,\n    uModelViewMatrix,\n    ...maybeMaxIterationsUniform,\n    uColormap,\n    uJuliaConstant,\n    vertexPositionBuffer,\n  };\n};\n\nconst initShaders = () => {\n  const vertexShaderSource = isWebGL2()\n    ? vertexShaderSourceWebGL2\n    : vertexShaderSourceWebGL1;\n  const mandelbrotShaderSource = isWebGL2()\n    ? mandelbrotShaderSourceWebGL2\n    : mandelbrotShaderSourceWebGL1;\n  const juliaShaderSource = isWebGL2()\n    ? juliaShaderSourceWebGL2\n    : juliaShaderSourceWebGL1;\n  const mandelbrotSet = initShadersHelper(\n    \"Mandelbrot\",\n    vertexShaderSource,\n    mandelbrotShaderSource\n  );\n  const juliaSet = initShadersHelper(\n    \"Julia\",\n    vertexShaderSource,\n    juliaShaderSource\n  );\n  fractalSets.set(FRACTAL_SET_ID_MANDELBROT, mandelbrotSet);\n  fractalSets.set(FRACTAL_SET_ID_JULIA, juliaSet);\n};\n\nconst setCurrentFractalSet = (fractalSetId, juliaConstant, colourMapId) => {\n  if (Number.isInteger(fractalSetId)) {\n    currentFractalSetId = fractalSetId;\n    currentFractalSet = fractalSets.get(fractalSetId);\n  }\n\n  if (juliaConstant) {\n    currentJuliaConstant = juliaConstant;\n  }\n  if (!currentJuliaConstant) {\n    currentJuliaConstant = { x: 0, y: 0 };\n  }\n\n  if (Number.isInteger(colourMapId)) {\n    currentColourMapId = colourMapId;\n    currentColourMap = colourMaps.get(colourMapId);\n  }\n\n  gl.useProgram(currentFractalSet.program);\n\n  const modelViewMatrix = glm.mat4.create();\n  glm.mat4.fromScaling(modelViewMatrix, [1, -1, 1]);\n  gl.uniformMatrix4fv(\n    currentFractalSet.uModelViewMatrix,\n    false,\n    modelViewMatrix\n  );\n\n  gl.uniform1i(currentFractalSet.uColormap, currentColourMap.textureUnit);\n  gl.uniform2f(\n    currentFractalSet.uJuliaConstant,\n    currentJuliaConstant.x,\n    currentJuliaConstant.y\n  );\n\n  setCanvasAndViewportSize();\n\n  render();\n};\n\nconst render = () => {\n  const corners = [\n    regionTopRight.x,\n    regionTopRight.y,\n    regionBottomLeft.x,\n    regionTopRight.y,\n    regionTopRight.x,\n    regionBottomLeft.y,\n    regionBottomLeft.x,\n    regionBottomLeft.y,\n  ];\n  const plotPositionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, plotPositionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(corners), gl.STATIC_DRAW);\n  gl.vertexAttribPointer(\n    currentFractalSet.aPlotPosition,\n    2,\n    gl.FLOAT,\n    false,\n    0,\n    0\n  );\n  if (isWebGL2()) {\n    gl.uniform1i(currentFractalSet.uMaxIterations, currentMaxIterations);\n  }\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.deleteBuffer(plotPositionBuffer);\n};\n\nconst displayConfiguration = async (configuration) => {\n  switchToBookmark(configuration);\n  const message = {\n    type: \"chooseConfiguration\",\n    fractalSetIds: [FRACTAL_SET_ID_MANDELBROT, FRACTAL_SET_ID_JULIA],\n    colorMapIds: Array.from(colourMaps.keys()),\n  };\n  const newConfiguration = await promiseWorker.postMessage(message);\n  setTimeout(displayConfiguration, 10000, newConfiguration);\n};\n\nconst start = async (manualMode) => {\n  // Turning off the service worker for the moment. Not quite happy with it yet.\n  // if ('serviceWorker' in navigator) {\n  //   try {\n  //     const registration = await navigator.serviceWorker.register('service-worker.js')\n  //     console.log('Successfully registered service worker', registration)\n  //   } catch (error) {\n  //     console.error(`Failed to register service worker: ${error.message}`)\n  //   }\n  // }\n\n  canvas = document.getElementById(\"canvas\");\n\n  initGL(canvas);\n  initShaders();\n  loadColourMaps();\n\n  window.addEventListener(\"resize\", onWindowResize);\n\n  if (manualMode) {\n    canvas.addEventListener(\"mousedown\", onCanvasMouseDownHandler);\n    canvas.addEventListener(\"mousemove\", onCanvasMouseMoveHandler);\n    canvas.addEventListener(\"mouseup\", onCanvasMouseUpHandler);\n    canvas.addEventListener(\"mouseleave\", onCanvasMouseLeaveHandler);\n    document.addEventListener(\"keydown\", onDocumentKeyDownHandler);\n    bookmarks = loadBookmarks();\n    nextBookmarkId = bookmarks.size ? Math.max(...bookmarks.keys()) + 1 : 0;\n    switchToBookmark(INITIAL_BOOKMARK);\n  } else {\n    displayConfiguration(INITIAL_BOOKMARK);\n    const animate = () => {\n      panRegion(0.01);\n      zoomRegion(0.01);\n      render();\n      requestAnimationFrame(animate);\n    };\n    animate();\n  }\n};\n\nconst adjustRegionAspectRatio = (canvasWidth, canvasHeight) => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x;\n  const regionHeight = regionTopRight.y - regionBottomLeft.y;\n\n  if (canvasWidth > canvasHeight) {\n    const widthDelta =\n      (canvasWidth / canvasHeight) * regionHeight - regionWidth;\n    const widthDeltaHalf = widthDelta / 2;\n    regionBottomLeft.x -= widthDeltaHalf;\n    regionTopRight.x += widthDeltaHalf;\n  }\n\n  if (canvasWidth < canvasHeight) {\n    const heightDelta =\n      (canvasHeight / canvasWidth) * regionWidth - regionHeight;\n    const heightDeltaHalf = heightDelta / 2;\n    regionBottomLeft.y -= heightDeltaHalf;\n    regionTopRight.y += heightDeltaHalf;\n  }\n};\n\nconst panRegion = (percent) => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x;\n  const regionHeight = regionTopRight.y - regionBottomLeft.y;\n  const widthDelta = (regionWidth / 100) * percent;\n  const heightDelta = (regionHeight / 100) * percent;\n  regionBottomLeft.x -= widthDelta;\n  regionBottomLeft.y -= heightDelta;\n  regionTopRight.x -= widthDelta;\n  regionTopRight.y -= heightDelta;\n};\n\nconst zoomRegion = (percent) => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x;\n  const regionHeight = regionTopRight.y - regionBottomLeft.y;\n  const widthDelta = (regionWidth / 100) * percent;\n  const widthDeltaHalf = widthDelta / 2;\n  const heightDelta = (regionHeight / 100) * percent;\n  const heightDeltaHalf = heightDelta / 2;\n  regionBottomLeft.x += widthDeltaHalf;\n  regionBottomLeft.y += heightDeltaHalf;\n  regionTopRight.x -= widthDeltaHalf;\n  regionTopRight.y -= heightDeltaHalf;\n};\n\nconst setCanvasAndViewportSize = () => {\n  canvas.width = canvas.clientWidth;\n  canvas.height = canvas.clientHeight;\n  gl.viewport(0, 0, canvas.width, canvas.height);\n  adjustRegionAspectRatio(canvas.width, canvas.height);\n};\n\nconst onWindowResize = () => {\n  setCanvasAndViewportSize();\n  render();\n};\n\nconst mouseToRegion = (mouseX, mouseY) => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x;\n  const regionHeight = regionTopRight.y - regionBottomLeft.y;\n  return {\n    regionMouseX: regionBottomLeft.x + (mouseX * regionWidth) / canvas.width,\n    regionMouseY: regionBottomLeft.y + (mouseY * regionHeight) / canvas.height,\n  };\n};\n\nconst onCanvasMouseDownHandler = (e) => {\n  const mouseX = e.offsetX;\n  const mouseY = e.offsetY;\n  const { regionMouseX, regionMouseY } = mouseToRegion(mouseX, mouseY);\n\n  if (e.shiftKey) {\n    const regionWidth = regionTopRight.x - regionBottomLeft.x;\n    const regionHeight = regionTopRight.y - regionBottomLeft.y;\n    const regionCentreX = regionBottomLeft.x + regionWidth / 2;\n    const regionCentreY = regionBottomLeft.y + regionHeight / 2;\n    const translationX = regionMouseX - regionCentreX;\n    const translationY = regionMouseY - regionCentreY;\n    regionBottomLeft.x += translationX;\n    regionBottomLeft.y += translationY;\n    regionTopRight.x += translationX;\n    regionTopRight.y += translationY;\n    return render();\n  }\n\n  if (e.altKey) {\n    switch (currentFractalSetId) {\n      case FRACTAL_SET_ID_MANDELBROT:\n        return setCurrentFractalSet(FRACTAL_SET_ID_JULIA, {\n          x: regionMouseX,\n          y: regionMouseY,\n        });\n\n      case FRACTAL_SET_ID_JULIA:\n        return setCurrentFractalSet(FRACTAL_SET_ID_MANDELBROT);\n\n      default:\n        return;\n    }\n  }\n\n  panning = true;\n  lastMousePt = { mouseX, mouseY };\n};\n\nconst onCanvasMouseMoveHandler = (e) => {\n  if (!panning) {\n    return;\n  }\n\n  const mouseX = e.offsetX;\n  const mouseY = e.offsetY;\n  const mouseDeltaX = mouseX - lastMousePt.mouseX;\n  const mouseDeltaY = mouseY - lastMousePt.mouseY;\n  const regionWidth = regionTopRight.x - regionBottomLeft.x;\n  const regionHeight = regionTopRight.y - regionBottomLeft.y;\n  const regionDeltaX = (mouseDeltaX * regionWidth) / canvas.width;\n  const regionDeltaY = (mouseDeltaY * regionHeight) / canvas.height;\n  regionBottomLeft.x -= regionDeltaX;\n  regionBottomLeft.y -= regionDeltaY;\n  regionTopRight.x -= regionDeltaX;\n  regionTopRight.y -= regionDeltaY;\n\n  render();\n\n  lastMousePt = { mouseX, mouseY };\n};\n\nconst onCanvasMouseUpHandler = () => {\n  panning = false;\n};\n\nconst onCanvasMouseLeaveHandler = () => {\n  panning = false;\n};\n\nconst onDocumentKeyDownHandler = (e) => {\n  if (bookmarkMode) {\n    return handleBookmarkKeys(e);\n  }\n\n  if (!bookmarkMode && e.key === \"b\" && e.ctrlKey) {\n    bookmarkMode = true;\n    return;\n  }\n\n  if (e.key === \"+\") {\n    zoomRegion(50);\n    return render();\n  }\n\n  if (e.key === \"-\") {\n    zoomRegion(-100);\n    return render();\n  }\n\n  if (e.key === \"h\" && e.ctrlKey) {\n    return switchToBookmark(HOME_BOOKMARK);\n  }\n\n  if ((e.key === \"c\" || e.key === \"C\") && e.ctrlKey) {\n    const keys = Array.from(colourMaps.keys());\n    const maxIndex = keys.length;\n    const oldIndex = keys.indexOf(currentColourMapId);\n    const newIndex = (oldIndex + (e.shiftKey ? maxIndex - 1 : 1)) % maxIndex;\n    const newColourMapId = keys[newIndex];\n    return setCurrentFractalSet(undefined, undefined, newColourMapId);\n  }\n\n  if (isWebGL2()) {\n    if (e.key === \"i\" || e.key === \"I\") {\n      const delta = C.DELTA_ITERATIONS * (e.shiftKey ? -1 : +1);\n      currentMaxIterations = currentMaxIterations + delta;\n      currentMaxIterations = Math.min(currentMaxIterations, C.MAX_ITERATIONS);\n      currentMaxIterations = Math.max(currentMaxIterations, C.MIN_ITERATIONS);\n      return render();\n    }\n  }\n\n  if (e.key === \"r\" || e.key === \"R\") {\n    // TODO: choose a random region\n  }\n};\n\nconst handleBookmarkKeys = (e) => {\n  bookmarkMode = false;\n\n  if (e.key === \"n\") {\n    const bookmark = createBookmark();\n    return presentBookmarkModal(bookmark);\n  }\n\n  if (e.key === \"l\") {\n    return presentManageBookmarksModal();\n  }\n};\n\nconst presentBookmarkModal = (bookmark) => {\n  const bookmarkModal = $(\"#bookmarkModal\");\n  const hasId = Number.isInteger(bookmark.id);\n  const title = hasId ? \"Edit Bookmark\" : \"Create Bookmark\";\n  $(\".modal-title\", bookmarkModal).text(title);\n  $('input[type=\"submit\"]', bookmarkModal)\n    .off(\"click\")\n    .on(\"click\", (e) => {\n      e.preventDefault();\n      bookmark.name = $(\"#name\", bookmarkModal).val();\n      if (!hasId) {\n        bookmark.id = nextBookmarkId++;\n        bookmarks.set(bookmark.id, bookmark);\n      }\n      saveBookmarks(bookmarks);\n      bookmarkModal.modal(\"hide\");\n    });\n  const thumbnailImg = $(\"img.thumbnail\", bookmarkModal);\n  const thumbnailCanvas = $(\"canvas.thumbnail\", bookmarkModal);\n  if (hasId) {\n    thumbnailCanvas.hide();\n    thumbnailImg.show();\n    thumbnailImg[0].src = bookmark.thumbnail;\n  } else {\n    thumbnailImg.hide();\n    thumbnailCanvas.show();\n    const thumbnailCanvasElement = thumbnailCanvas[0];\n    const thumbnailCtx = thumbnailCanvasElement.getContext(\"2d\");\n    const swidth = Math.min(canvas.width, canvas.height);\n    const sheight = Math.min(canvas.width, canvas.height);\n    const sx = (canvas.width - swidth) / 2;\n    const sy = (canvas.height - sheight) / 2;\n    const dwidth = thumbnailCanvasElement.width;\n    const dheight = thumbnailCanvasElement.height;\n    thumbnailCtx.drawImage(\n      canvas,\n      sx,\n      sy,\n      swidth,\n      sheight,\n      0,\n      0,\n      dwidth,\n      dheight\n    );\n    bookmark.thumbnail = thumbnailCanvasElement.toDataURL(\"image/jpeg\", 1.0);\n  }\n  $(\"#name\", bookmarkModal).val(bookmark.name).focus();\n  $(\".fractal-set\", bookmarkModal).text(\n    fractalSets.get(bookmark.fractalSetId).name\n  );\n  $(\".colour-map\", bookmarkModal).text(\n    colourMaps.get(bookmark.colourMapId).name\n  );\n  $(\".max-iterations\", bookmarkModal).text(bookmark.maxIterations);\n  $(\".region-bottom-left\", bookmarkModal).text(\n    `(${bookmark.regionBottomLeft.x}, ${bookmark.regionBottomLeft.y})`\n  );\n  $(\".region-top-right\", bookmarkModal).text(\n    `(${bookmark.regionTopRight.x}, ${bookmark.regionTopRight.y})`\n  );\n  const juliaConstantP = $(\".julia-constant\", bookmarkModal);\n  const juliaConstantDiv = juliaConstantP.closest(\"div\");\n  if (bookmark.fractalSetId === FRACTAL_SET_ID_JULIA) {\n    juliaConstantP.text(\n      `(${bookmark.juliaConstant.x}, ${bookmark.juliaConstant.y})`\n    );\n    juliaConstantDiv.show();\n  } else {\n    juliaConstantDiv.hide();\n  }\n  bookmarkModal.modal();\n};\n\nconst presentManageBookmarksModal = () => {\n  const manageBookmarksModal = $(\"#manageBookmarksModal\");\n  const tbody = $(\"tbody\", manageBookmarksModal).empty();\n  const invokeHandler = (handler, bookmark) => () => {\n    manageBookmarksModal.modal(\"hide\");\n    handler(bookmark);\n  };\n  const onSwitchTo = (bookmark) => switchToBookmark(bookmark);\n  const onEdit = (bookmark) => presentBookmarkModal(bookmark);\n  const onDelete = (bookmark) => {\n    bookmarks.delete(bookmark.id);\n    saveBookmarks(bookmarks);\n  };\n  const bookmarkRowTemplate = document.getElementById(\"bookmark-row-template\");\n  bookmarks.forEach((bookmark) => {\n    const tr = document.importNode(bookmarkRowTemplate.content, true);\n    const img = tr.querySelector(\":nth-child(1) img\");\n    const name = tr.querySelector(\":nth-child(2)\");\n    const editButton = tr.querySelector(\":nth-child(3) i\");\n    const deleteButton = tr.querySelector(\":nth-child(4) i\");\n    img.src = bookmark.thumbnail;\n    name.innerText = bookmark.name;\n    img.addEventListener(\"click\", invokeHandler(onSwitchTo, bookmark));\n    editButton.addEventListener(\"click\", invokeHandler(onEdit, bookmark));\n    deleteButton.addEventListener(\"click\", invokeHandler(onDelete, bookmark));\n    tbody.append(tr);\n  });\n  manageBookmarksModal.modal();\n};\n\nconst createBookmark = (name) => ({\n  name: name || `Bookmark${nextBookmarkId}`,\n  fractalSetId: currentFractalSetId,\n  juliaConstant: { ...currentJuliaConstant },\n  colourMapId: currentColourMapId,\n  regionBottomLeft: { ...regionBottomLeft },\n  regionTopRight: { ...regionTopRight },\n  maxIterations: currentMaxIterations,\n});\n\nconst switchToBookmark = (bookmark) => {\n  regionBottomLeft.x = bookmark.regionBottomLeft.x;\n  regionBottomLeft.y = bookmark.regionBottomLeft.y;\n  regionTopRight.x = bookmark.regionTopRight.x;\n  regionTopRight.y = bookmark.regionTopRight.y;\n  currentMaxIterations = bookmark.maxIterations;\n  setCurrentFractalSet(\n    bookmark.fractalSetId,\n    bookmark.juliaConstant,\n    bookmark.colourMapId\n  );\n};\n\nconst loadBookmarks = () => {\n  return new Map(JSON.parse(localStorage.bookmarks || \"[]\"));\n};\n\nconst saveBookmarks = (bookmarks) => {\n  localStorage.bookmarks = JSON.stringify(Array.from(bookmarks.entries()));\n};\n\nconst url = new URL(document.location);\nconst manualMode = url.searchParams.get(\"mode\") === \"manual\";\n\nstart(manualMode);\n","export const INITIAL_ITERATIONS = 128;\nexport const MIN_ITERATIONS = 16;\nexport const MAX_ITERATIONS = 256;\nexport const DELTA_ITERATIONS = 16;\n","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;"],"names":["messageIds","onMessage","self","e","message","data","Array","isArray","length","messageId","error","result","callback","_callbacks","PromiseWorker","worker","this","_worker","addEventListener","prototype","postMessage","userMessage","messageToSend","Promise","resolve","reject","Error","controller","channel","MessageChannel","port1","onmessage","port2","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","m","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","u","chunkId","g","globalThis","Function","window","obj","prop","hasOwnProperty","call","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","i","replace","p","b","baseURI","href","ARRAY_TYPE","Float32Array","Math","random","PI","hypot","y","arguments","sqrt","gnuplotPaletteFunctions","x","pow","sin","cos","abs","colourMapDictionary","jet","usesFuncs","red","green","blue","hot","gist_stern","gnuplot","gnuplot2","afmhot","flatten","xss","reduce","acc","xs","concat","MONOCHROME_COLOUR_MAP","N","fill","rsgsbsToColourValues","rs","gs","bs","values","makeMappingArray","adata","map","y0","y1","v","lut","xind","from","keys","ind","searchSorted","slice","distance","forEach","clipZeroToOne","arr","vs","arrLen","added","j","makeMappingArray2","lambda","linearSpaced","start","stop","step","clip","min","max","Worker","URL","promiseWorker","canvas","gl","loadColourMap","name","textureUnit","colourMap","makeMappingArrayFunc","getColourMapRgbaValues","console","getColourMap","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixels","Uint8Array","value","width","texImage2D","RGBA","UNSIGNED_BYTE","createColormapTexture","fractalSets","Map","colourMaps","currentFractalSetId","currentFractalSet","currentJuliaConstant","currentColourMapId","currentColourMap","lastMousePt","currentMaxIterations","regionBottomLeft","regionTopRight","panning","INITIAL_BOOKMARK","fractalSetId","juliaConstant","colourMapId","maxIterations","HOME_BOOKMARK","bookmarkMode","nextBookmarkId","bookmarks","isWebGL2","WebGL2RenderingContext","getShader","source","shaderType","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","errorMessage","getShaderInfoLog","initShadersHelper","vertexShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","aVertexPosition","getAttribLocation","enableVertexAttribArray","aPlotPosition","uModelViewMatrix","getUniformLocation","uColormap","uJuliaConstant","maybeMaxIterationsUniform","uMaxIterations","vertexPositionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","setCurrentFractalSet","Number","isInteger","useProgram","modelViewMatrix","out","uniformMatrix4fv","uniform1i","uniform2f","setCanvasAndViewportSize","render","corners","plotPositionBuffer","drawArrays","TRIANGLE_STRIP","deleteBuffer","displayConfiguration","async","configuration","switchToBookmark","type","fractalSetIds","colorMapIds","newConfiguration","setTimeout","zoomRegion","percent","widthDeltaHalf","heightDeltaHalf","clientWidth","height","clientHeight","viewport","canvasWidth","canvasHeight","regionWidth","regionHeight","adjustRegionAspectRatio","onWindowResize","onCanvasMouseDownHandler","mouseX","offsetX","mouseY","offsetY","regionMouseX","regionMouseY","mouseToRegion","shiftKey","translationX","translationY","altKey","onCanvasMouseMoveHandler","mouseDeltaX","mouseDeltaY","regionDeltaX","regionDeltaY","onCanvasMouseUpHandler","onCanvasMouseLeaveHandler","onDocumentKeyDownHandler","handleBookmarkKeys","ctrlKey","maxIndex","oldIndex","indexOf","newColourMapId","delta","bookmark","createBookmark","presentBookmarkModal","presentManageBookmarksModal","bookmarkModal","$","hasId","id","title","text","off","on","preventDefault","val","set","saveBookmarks","modal","thumbnailImg","thumbnailCanvas","hide","show","thumbnail","thumbnailCanvasElement","thumbnailCtx","getContext","swidth","sheight","sx","sy","dwidth","dheight","drawImage","toDataURL","focus","juliaConstantP","juliaConstantDiv","closest","manageBookmarksModal","tbody","empty","invokeHandler","handler","onSwitchTo","onEdit","onDelete","delete","bookmarkRowTemplate","getElementById","tr","importNode","content","img","querySelector","editButton","deleteButton","innerText","append","localStorage","JSON","stringify","entries","manualMode","initGL","mandelbrotShaderSource","juliaShaderSource","mandelbrotSet","juliaSet","initShaders","colorMapName","index","parse","size","animate","widthDelta","heightDelta","panRegion","requestAnimationFrame","searchParams"],"sourceRoot":""}