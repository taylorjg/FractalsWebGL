{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/constants.js","webpack:///./src/js/colourMapData.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/promise-worker/index.js","webpack:///./src/shaders/webgl1/shader.vert.glsl","webpack:///./src/shaders/webgl1/mandelbrot.frag.glsl","webpack:///./src/shaders/webgl1/julia.frag.glsl","webpack:///./src/shaders/webgl2/shader.vert.glsl","webpack:///./src/shaders/webgl2/mandelbrot.frag.glsl","webpack:///./src/shaders/webgl2/julia.frag.glsl","webpack:///./src/js/colourMaps.js","webpack:///./src/js/index.js","webpack:///./src/js/web-worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","INITIAL_ITERATIONS","MIN_ITERATIONS","MAX_ITERATIONS","DELTA_ITERATIONS","gnuplotPaletteFunctions","x","Math","pow","sqrt","sin","PI","cos","abs","colourMapDictionary","usesFuncs","red","green","blue","EPSILON","ARRAY_TYPE","Float32Array","Array","random","out","clone","a","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","set","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b","b0","b1","b2","b3","translate","v","y","z","scale","rotate","rad","axis","b12","b20","b21","b22","len","hypot","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","targetTo","target","str","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","exactEquals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","max","arguments","length","mul","sub","messageIds","onMessage","self","e","message","data","isArray","messageId","error","result","callback","_callbacks","PromiseWorker","worker","this","_worker","addEventListener","postMessage","userMessage","messageToSend","Promise","resolve","reject","Error","controller","channel","MessageChannel","port1","onmessage","port2","flatten","xss","reduce","acc","xs","concat","MONOCHROME_COLOUR_MAP","N","fill","getColourMap","getColourMapRgbaValues","console","makeMappingArrayFunc","makeMappingArray2","makeMappingArray","rs","gs","bs","rsgsbsToColourValues","values","adata","map","lut","xind","from","keys","ind","searchSorted","slice","distance","forEach","clipZeroToOne","arr","vs","arrLen","added","j","lambda","linearSpaced","start","stop","step","clip","min","Worker","promiseWorker","canvas","gl","loadColourMap","textureUnit","colourMap","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","pixels","Uint8Array","width","texImage2D","RGBA","UNSIGNED_BYTE","createColormapTexture","fractalSets","Map","colourMaps","lastMousePt","currentMaxIterations","currentFractalSetId","undefined","currentFractalSet","currentJuliaConstant","currentColourMapId","currentColourMap","regionBottomLeft","regionTopRight","panning","INITIAL_BOOKMARK","fractalSetId","juliaConstant","colourMapId","maxIterations","HOME_BOOKMARK","bookmarkMode","nextBookmarkId","bookmarks","isWebGL2","WebGL2RenderingContext","getShader","source","shaderType","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","errorMessage","getShaderInfoLog","initShadersHelper","vertexShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","aVertexPosition","getAttribLocation","enableVertexAttribArray","aPlotPosition","uModelViewMatrix","getUniformLocation","uColormap","uJuliaConstant","maybeMaxIterationsUniform","uMaxIterations","vertexPositionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","setCurrentFractalSet","Number","isInteger","useProgram","modelViewMatrix","uniformMatrix4fv","uniform1i","uniform2f","setCanvasAndViewportSize","render","corners","plotPositionBuffer","drawArrays","TRIANGLE_STRIP","deleteBuffer","displayConfiguration","async","switchToBookmark","configuration","type","fractalSetIds","colorMapIds","newConfiguration","setTimeout","panRegion","percent","widthDelta","heightDelta","zoomRegion","widthDeltaHalf","heightDeltaHalf","clientWidth","height","clientHeight","viewport","canvasWidth","canvasHeight","regionWidth","regionHeight","adjustRegionAspectRatio","onWindowResize","onCanvasMouseDownHandler","mouseX","offsetX","mouseY","offsetY","regionMouseX","regionMouseY","mouseToRegion","shiftKey","translationX","translationY","altKey","onCanvasMouseMoveHandler","mouseDeltaX","mouseDeltaY","regionDeltaX","regionDeltaY","onCanvasMouseUpHandler","onCanvasMouseLeaveHandler","onDocumentKeyDownHandler","handleBookmarkKeys","ctrlKey","maxIndex","oldIndex","indexOf","newColourMapId","delta","bookmark","createBookmark","presentBookmarkModal","presentManageBookmarksModal","bookmarkModal","$","hasId","id","title","text","off","on","preventDefault","val","saveBookmarks","modal","thumbnailImg","thumbnailCanvas","hide","show","src","thumbnail","thumbnailCanvasElement","thumbnailCtx","getContext","swidth","sheight","dwidth","dheight","drawImage","toDataURL","focus","juliaConstantP","juliaConstantDiv","closest","manageBookmarksModal","tbody","empty","invokeHandler","handler","onSwitchTo","onEdit","onDelete","delete","bookmarkRowTemplate","document","getElementById","tr","importNode","content","img","querySelector","editButton","deleteButton","innerText","append","loadBookmarks","JSON","parse","localStorage","stringify","entries","navigator","registration","serviceWorker","register","log","initGL","mandelbrotShaderSource","juliaShaderSource","mandelbrotSet","juliaSet","initShaders","colorMapName","index","window","manualMode","size","animate","requestAnimationFrame","URL","location","searchParams"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","export const INITIAL_ITERATIONS = 128\nexport const MIN_ITERATIONS = 16\nexport const MAX_ITERATIONS = 256\nexport const DELTA_ITERATIONS = 16\n","const JET_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0, 0],\n    [0.35, 0, 0],\n    [0.66, 1, 1],\n    [0.89, 1, 1],\n    [1, 0.5, 0.5]\n  ],\n  green: [\n    [0, 0, 0],\n    [0.125, 0, 0],\n    [0.375, 1, 1],\n    [0.64, 1, 1],\n    [0.91, 0, 0],\n    [1, 0, 0]\n  ],\n  blue: [\n    [0, 0.5, 0.5],\n    [0.11, 1, 1],\n    [0.34, 1, 1],\n    [0.65, 0, 0],\n    [1, 0, 0]\n  ]\n}\n\nconst HOT_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0.0416, 0.0416],\n    [0.365079, 1.000000, 1.000000],\n    [1, 1, 1]\n  ],\n  green: [\n    [0, 0, 0],\n    [0.365079, 0.000000, 0.000000],\n    [0.746032, 1.000000, 1.000000],\n    [1, 1, 1]\n  ],\n  blue: [\n    [0, 0, 0],\n    [0.746032, 0.000000, 0.000000],\n    [1, 1, 1]\n  ]\n}\n\nconst GIST_STERN_DATA = {\n  usesFuncs: false,\n  red: [\n    [0, 0, 0],\n    [0.0547, 1, 1],\n    [0.250, 0.027, 0.250],\n    [1, 1, 1]\n  ],\n  green: [\n    [0, 0, 0],\n    [1, 0, 0]\n  ],\n  blue: [\n    [0, 0, 0],\n    [0.5, 1, 1],\n    [0.735, 0, 0],\n    [1, 0, 0]\n  ]\n}\n\nconst gnuplotPaletteFunctions = [\n    /* 0  */ () => 0,\n    /* 1  */ () => 0.5,\n    /* 2  */ () => 1,\n    /* 3  */ x => x,\n    /* 4  */ x => Math.pow(x, 2),\n    /* 5  */ x => Math.pow(x, 3),\n    /* 6  */ x => Math.pow(x, 4),\n    /* 7  */ x => Math.sqrt(x),\n    /* 8  */ x => Math.sqrt(Math.sqrt(x)),\n    /* 9  */ x => Math.sin(x * Math.PI / 2),\n    /* 10 */ x => Math.cos(x * Math.PI / 2),\n    /* 11 */ x => Math.abs(x - 0.5),\n    /* 12 */ x => Math.pow(2 * x - 1, 2),\n    /* 13 */ x => Math.sin(x * Math.PI),\n    /* 14 */ x => Math.abs(Math.cos(x * Math.PI)),\n    /* 15 */ x => Math.sin(x * 2 * Math.PI),\n    /* 16 */ x => Math.cos(x * 2 * Math.PI),\n    /* 17 */ x => Math.abs(Math.sin(x * 2 * Math.PI)),\n    /* 18 */ x => Math.abs(Math.cos(x * 2 * Math.PI)),\n    /* 19 */ x => Math.abs(Math.sin(x * 4 * Math.PI)),\n    /* 20 */ x => Math.abs(Math.cos(x * 4 * Math.PI)),\n    /* 21 */ x => 3 * x,\n    /* 22 */ x => 3 * x - 1,\n    /* 23 */ x => 3 * x - 2,\n    /* 24 */ x => Math.abs(3 * x - 1),\n    /* 25 */ x => Math.abs(3 * x - 2),\n    /* 26 */ x => (3 * x - 1) / 2,\n    /* 27 */ x => (3 * x - 2) / 2,\n    /* 28 */ x => Math.abs((3 * x - 1) / 2),\n    /* 29 */ x => Math.abs((3 * x - 2) / 2),\n    /* 30 */ x => x / 0.32 - 0.78125,\n    /* 31 */ x => 2 * x - 0.84,\n    /* 32 */ x => x < 0.25 ? 4 * x : x < 0.92 ? -2 * x + 1.84 : x / 0.08 - 11.5,\n    /* 33 */ x => Math.abs(2 * x - 0.5),\n    /* 34 */ x => 2 * x,\n    /* 35 */ x => 2 * x - 0.5,\n    /* 36 */ x => 2 * x - 1\n]\n\n// https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/_cm.py\n// https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/colors.py\n\n// const OCEAN_DATA = {\n//   usesFuncs: true,\n//   red: gnuplotPaletteFunctions[23],\n//   green: gnuplotPaletteFunctions[28],\n//   blue: gnuplotPaletteFunctions[3]\n// }\n\n// const RAINBOW_DATA = {\n//   usesFuncs: true,\n//   red: gnuplotPaletteFunctions[33],\n//   green: gnuplotPaletteFunctions[13],\n//   blue: gnuplotPaletteFunctions[10]\n// }\n\nconst GNUPLOT_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[7],\n  green: gnuplotPaletteFunctions[5],\n  blue: gnuplotPaletteFunctions[15]\n}\n\nconst GNUPLOT2_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[30],\n  green: gnuplotPaletteFunctions[31],\n  blue: gnuplotPaletteFunctions[32]\n}\n\nconst AFMHOT_DATA = {\n  usesFuncs: true,\n  red: gnuplotPaletteFunctions[34],\n  green: gnuplotPaletteFunctions[35],\n  blue: gnuplotPaletteFunctions[36]\n}\n\nexport const colourMapDictionary = {\n  'jet': JET_DATA,\n  'hot': HOT_DATA,\n  'gist_stern': GIST_STERN_DATA,\n  'gnuplot': GNUPLOT_DATA,\n  'gnuplot2': GNUPLOT2_DATA,\n  'afmhot': AFMHOT_DATA\n}\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","'use strict'\n\nvar messageIds = 0\n\nfunction onMessage (self, e) {\n  var message = e.data\n  if (!Array.isArray(message) || message.length < 2) {\n    // Ignore - this message is not for us.\n    return\n  }\n  var messageId = message[0]\n  var error = message[1]\n  var result = message[2]\n\n  var callback = self._callbacks[messageId]\n\n  if (!callback) {\n    // Ignore - user might have created multiple PromiseWorkers.\n    // This message is not for us.\n    return\n  }\n\n  delete self._callbacks[messageId]\n  callback(error, result)\n}\n\nfunction PromiseWorker (worker) {\n  var self = this\n  self._worker = worker\n  self._callbacks = {}\n\n  worker.addEventListener('message', function (e) {\n    onMessage(self, e)\n  })\n}\n\nPromiseWorker.prototype.postMessage = function (userMessage) {\n  var self = this\n  var messageId = messageIds++\n\n  var messageToSend = [messageId, userMessage]\n\n  return new Promise(function (resolve, reject) {\n    self._callbacks[messageId] = function (error, result) {\n      if (error) {\n        return reject(new Error(error.message))\n      }\n      resolve(result)\n    }\n\n    /* istanbul ignore if */\n    if (typeof self._worker.controller !== 'undefined') {\n      // service worker, use MessageChannels because e.source is broken in Chrome < 51:\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=543198\n      var channel = new MessageChannel()\n      channel.port1.onmessage = function (e) {\n        onMessage(self, e)\n      }\n      self._worker.controller.postMessage(messageToSend, [channel.port2])\n    } else {\n      // web worker\n      self._worker.postMessage(messageToSend)\n    }\n  })\n}\n\nmodule.exports = PromiseWorker\n","module.exports = \"precision highp float;\\n\\nattribute vec2 aVertexPosition;\\nattribute vec2 aPlotPosition;\\nuniform mat4 uModelViewMatrix;\\nvarying vec2 vPosition;\\n\\nvoid main(void) {\\n  gl_Position = uModelViewMatrix * vec4(aVertexPosition, 0, 1);\\n  vPosition = aPlotPosition;\\n}\\n\"","module.exports = \"precision highp float;\\n\\n// Same value as INITIAL_ITERATIONS in constants.js\\nconst int MAX_ITERATIONS = 128;\\n\\nvec4 loop(sampler2D colormap, vec2 z, vec2 c) {\\n  int iteration = MAX_ITERATIONS;\\n  for (int i = 0; i < MAX_ITERATIONS; i++) {\\n    if (dot(z, z) >= 4.0) {\\n      iteration = i;\\n      break;\\n    }\\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\\n    z = zSquared + c;\\n  }\\n  float s = float(iteration) / float(MAX_ITERATIONS + 1);\\n  float t = 0.0;\\n  vec2 coord = vec2(s, t);\\n  return texture2D(colormap, coord);\\n}\\n\\n\\nuniform sampler2D uColormap;\\nvarying vec2 vPosition;\\n\\nvoid main(void) {\\n  vec2 z;\\n  vec2 c = vPosition;\\n  gl_FragColor = loop(uColormap, z, c);\\n}\\n\"","module.exports = \"precision highp float;\\n\\n// Same value as INITIAL_ITERATIONS in constants.js\\nconst int MAX_ITERATIONS = 128;\\n\\nvec4 loop(sampler2D colormap, vec2 z, vec2 c) {\\n  int iteration = MAX_ITERATIONS;\\n  for (int i = 0; i < MAX_ITERATIONS; i++) {\\n    if (dot(z, z) >= 4.0) {\\n      iteration = i;\\n      break;\\n    }\\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\\n    z = zSquared + c;\\n  }\\n  float s = float(iteration) / float(MAX_ITERATIONS + 1);\\n  float t = 0.0;\\n  vec2 coord = vec2(s, t);\\n  return texture2D(colormap, coord);\\n}\\n\\n\\nuniform sampler2D uColormap;\\nuniform vec2 uJuliaConstant;\\nvarying vec2 vPosition;\\n\\nvoid main(void) {\\n  vec2 z = vPosition;\\n  vec2 c = uJuliaConstant;\\n  gl_FragColor = loop(uColormap, z, c);\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\n\\nin vec2 aVertexPosition;\\nin vec2 aPlotPosition;\\nuniform mat4 uModelViewMatrix;\\nout vec2 vPosition;\\n\\nvoid main(void) {\\n  gl_Position = uModelViewMatrix * vec4(aVertexPosition, 0, 1);\\n  vPosition = aPlotPosition;\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\n\\nvec4 loop(int maxIterations, sampler2D colormap, vec2 z, vec2 c) {\\n  int iteration = 0;\\n  while (iteration < maxIterations) {\\n    if (dot(z, z) >= 4.0) break;\\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\\n    z = zSquared + c;\\n    iteration++;\\n  }\\n  int s = 255 * iteration / maxIterations;\\n  int t = 0;\\n  ivec2 coord = ivec2(s, t);\\n  int lod = 0;\\n  return texelFetch(colormap, coord, lod);\\n}\\n\\n\\nuniform int uMaxIterations;\\nuniform sampler2D uColormap;\\nin vec2 vPosition;\\nout vec4 fragColor;\\n\\nvoid main(void) {\\n  vec2 z;\\n  vec2 c = vPosition;\\n  fragColor = loop(uMaxIterations, uColormap, z, c);\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\n\\nvec4 loop(int maxIterations, sampler2D colormap, vec2 z, vec2 c) {\\n  int iteration = 0;\\n  while (iteration < maxIterations) {\\n    if (dot(z, z) >= 4.0) break;\\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\\n    z = zSquared + c;\\n    iteration++;\\n  }\\n  int s = 255 * iteration / maxIterations;\\n  int t = 0;\\n  ivec2 coord = ivec2(s, t);\\n  int lod = 0;\\n  return texelFetch(colormap, coord, lod);\\n}\\n\\n\\nuniform int uMaxIterations;\\nuniform sampler2D uColormap;\\nuniform vec2 uJuliaConstant;\\nin vec2 vPosition;\\nout vec4 fragColor;\\n\\nvoid main(void) {\\n  vec2 z = vPosition;\\n  vec2 c = uJuliaConstant;\\n  fragColor = loop(uMaxIterations, uColormap, z, c);\\n}\\n\"","import { colourMapDictionary } from './colourMapData'\n\nconst flatten = xss => xss.reduce((acc, xs) => acc.concat(xs), [])\n\nconst N = 256\n\nconst WHITE = [1, 1, 1, 1]\nconst BLACK = [0, 0, 0, 1]\nconst MONOCHROME_COLOUR_MAP = flatten(Array(N - 4).fill(WHITE).concat(Array(4).fill(BLACK)))\n\nexport const getColourMap = name => {\n  const data = colourMapDictionary[name]\n  if (data) {\n    return getColourMapRgbaValues(data, N)\n  }\n  switch (name) {\n    case 'monochrome':\n      return MONOCHROME_COLOUR_MAP\n    default:\n      console.error(`ERROR: unknown colour map name, '${name}'.`)\n      return MONOCHROME_COLOUR_MAP\n  }\n}\n\nconst getColourMapRgbaValues = (data, n) => {\n  const makeMappingArrayFunc = data.usesFuncs\n    ? makeMappingArray2\n    : makeMappingArray\n  const rs = makeMappingArrayFunc(n, data.red)\n  const gs = makeMappingArrayFunc(n, data.green)\n  const bs = makeMappingArrayFunc(n, data.blue)\n  return flatten(rsgsbsToColourValues(n, rs, gs, bs))\n}\n\nconst rsgsbsToColourValues = (n, rs, gs, bs) => {\n  const values = Array(n)\n  for (let i = 0; i < n; i++) {\n    values[i] = [rs[i], gs[i], bs[i], 1]\n  }\n  return values\n}\n\nconst makeMappingArray = (n, adata) => {\n\n  let x = adata.map(e => e[0])\n  const y0 = adata.map(e => e[1])\n  const y1 = adata.map(e => e[2])\n\n  x = x.map(v => v * (n - 1))\n\n  const lut = new Array(n).fill(0)\n\n  const xind = Array.from(Array(n).keys())\n\n  let ind = searchSorted(x, xind)\n  ind = ind.slice(1, ind.length - 1)\n\n  const distance = Array.from(Array(n - 2).keys())\n    .map(i => {\n      const numerator = xind[i + 1] - x[ind[i] - 1]\n      const denominator = x[ind[i]] - x[ind[i] - 1]\n      return numerator / denominator\n    })\n\n  Array.from(Array(n - 2).keys()).forEach(i =>\n    lut[i + 1] = distance[i] * (y0[ind[i]] - y1[ind[i] - 1]) + y1[ind[i] - 1])\n\n  lut[0] = y1[0]\n\n  lut[n - 1] = y0[y0.length - 1]\n\n  return lut.map(clipZeroToOne)\n}\n\nconst searchSorted = (arr, vs) => {\n  const result = Array(vs.length)\n  const arrLen = arr.length\n  for (let i = 0; i < vs.length; i++) {\n    const v = vs[i]\n    let added = false\n    for (let j = 0; j < arrLen; j++) {\n      if (v <= arr[j]) {\n        result[i] = j\n        added = true\n        break\n      }\n    }\n    if (!added) result[i] = arrLen\n  }\n  return result\n}\n\nconst makeMappingArray2 = (n, lambda) =>\n  linearSpaced(n, 0, 1)\n    .map(lambda)\n    .map(clipZeroToOne)\n\nconst linearSpaced = (length, start, stop) => {\n  const step = (stop - start) / (length - 1)\n  const data = Array(length)\n  for (let i = 0; i < data.length; i++) {\n    data[i] = start + i * step\n  }\n  data[data.length - 1] = stop\n  return data\n}\n\nconst clipZeroToOne = v => clip(0, 1, v)\n\nconst clip = (min, max, v) => v < min ? min : v > max ? max : v\n","import PromiseWorker from 'promise-worker'\nimport * as glm from 'gl-matrix'\nimport vertexShaderSourceWebGL1 from '../shaders/webgl1/shader.vert.glsl'\nimport mandelbrotShaderSourceWebGL1 from '../shaders/webgl1/mandelbrot.frag.glsl'\nimport juliaShaderSourceWebGL1 from '../shaders/webgl1/julia.frag.glsl'\nimport vertexShaderSourceWebGL2 from '../shaders/webgl2/shader.vert.glsl'\nimport mandelbrotShaderSourceWebGL2 from '../shaders/webgl2/mandelbrot.frag.glsl'\nimport juliaShaderSourceWebGL2 from '../shaders/webgl2/julia.frag.glsl'\nimport { colourMapDictionary } from './colourMapData'\nimport { getColourMap } from './colourMaps'\nimport * as C from './constants'\n\nconst worker = new Worker('./web-worker.js', { type: 'module' })\nconst promiseWorker = new PromiseWorker(worker)\n\nconst FRACTAL_SET_ID_MANDELBROT = 0\nconst FRACTAL_SET_ID_JULIA = 1\n\nlet canvas\nlet gl\n\nconst createColormapTexture = (colourMap, textureUnit) => {\n  const texture = gl.createTexture()\n  gl.activeTexture(gl.TEXTURE0 + textureUnit)\n  gl.bindTexture(gl.TEXTURE_2D, texture)\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\n  const pixels = new Uint8Array(colourMap.map(value => value * 255))\n  const level = 0\n  const width = colourMap.length / 4\n  const height = 1\n  const border = 0\n  gl.texImage2D(\n    gl.TEXTURE_2D,\n    level,\n    gl.RGBA,\n    width,\n    height,\n    border,\n    gl.RGBA,\n    gl.UNSIGNED_BYTE,\n    pixels)\n}\n\nconst loadColourMap = (name, textureUnit) => {\n  const colourMap = getColourMap(name)\n  createColormapTexture(colourMap, textureUnit)\n  return {\n    name,\n    colourMap,\n    textureUnit\n  }\n}\n\nconst loadColourMaps = () => {\n  const colorMapNames = Array.from(Object.keys(colourMapDictionary))\n  colorMapNames.forEach((colorMapName, index) => {\n    colourMaps.set(index, loadColourMap(colorMapName, index))\n  })\n}\n\nconst fractalSets = new Map()\nconst colourMaps = new Map()\n\nlet currentMaxIterations = C.INITIAL_ITERATIONS\nlet currentFractalSetId = undefined\nlet currentFractalSet = undefined\nlet currentJuliaConstant = undefined\nlet currentColourMapId = undefined\nlet currentColourMap = undefined\nlet regionBottomLeft = {}\nlet regionTopRight = {}\nlet panning = false\nlet lastMousePt\n\nconst INITIAL_BOOKMARK = {\n  fractalSetId: FRACTAL_SET_ID_MANDELBROT,\n  juliaConstant: { x: 0, y: 0 },\n  colourMapId: 0,\n  regionBottomLeft: { x: -0.22, y: -0.7 },\n  regionTopRight: { x: -0.21, y: -0.69 },\n  maxIterations: C.INITIAL_ITERATIONS\n}\n\nconst HOME_BOOKMARK = {\n  fractalSetId: FRACTAL_SET_ID_MANDELBROT,\n  juliaConstant: { x: 0, y: 0 },\n  colourMapId: 0,\n  regionBottomLeft: { x: -2.25, y: -1.5 },\n  regionTopRight: { x: 0.75, y: 1.5 },\n  maxIterations: C.INITIAL_ITERATIONS\n}\n\nlet bookmarkMode = false\nlet nextBookmarkId = 0\nlet bookmarks = new Map()\n\nconst initGL = canvas => {\n  // gl = canvas.getContext('webgl2') || canvas.getContext('webgl')\n  // I'm just using 'webgl' for the moment because I'm having problems\n  // with 'webgl2' on iPad (Safari/Chrome).\n  gl = canvas.getContext('webgl')\n  if (!gl) {\n    console.error('Failed to initialise WebGL')\n  }\n}\n\nconst isWebGL2 = () => gl instanceof WebGL2RenderingContext\n\nconst getShader = (gl, source, shaderType) => {\n  const shader = gl.createShader(shaderType)\n  gl.shaderSource(shader, source)\n  gl.compileShader(shader)\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    const errorMessage = gl.getShaderInfoLog(shader)\n    console.error(`Failed to compile shader: ${errorMessage}`)\n    return null\n  }\n  return shader\n}\n\nconst initShadersHelper = (name, vertexShaderSource, fragmentShaderSource) => {\n\n  const vertexShader = getShader(gl, vertexShaderSource, gl.VERTEX_SHADER)\n  const fragmentShader = getShader(gl, fragmentShaderSource, gl.FRAGMENT_SHADER)\n  const program = gl.createProgram()\n  gl.attachShader(program, vertexShader)\n  gl.attachShader(program, fragmentShader)\n  gl.linkProgram(program)\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    const errorMessage = gl.getProgramInfoLog(program)\n    console.error(`Could not initialise shaders: ${errorMessage}`)\n    return\n  }\n\n  const aVertexPosition = gl.getAttribLocation(program, 'aVertexPosition')\n  gl.enableVertexAttribArray(aVertexPosition)\n\n  const aPlotPosition = gl.getAttribLocation(program, 'aPlotPosition')\n  gl.enableVertexAttribArray(aPlotPosition)\n\n  const uModelViewMatrix = gl.getUniformLocation(program, 'uModelViewMatrix')\n  const uColormap = gl.getUniformLocation(program, 'uColormap')\n  const uJuliaConstant = gl.getUniformLocation(program, 'uJuliaConstant')\n\n  const maybeMaxIterationsUniform = isWebGL2()\n    ? { uMaxIterations: gl.getUniformLocation(program, 'uMaxIterations') }\n    : undefined\n\n  const vertices = [\n    1.0, 1.0,\n    -1.0, 1.0,\n    1.0, -1.0,\n    -1.0, -1.0,\n  ]\n  const vertexPositionBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer)\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW)\n  gl.vertexAttribPointer(aVertexPosition, 2, gl.FLOAT, false, 0, 0)\n\n  return {\n    name,\n    program,\n    aVertexPosition,\n    aPlotPosition,\n    uModelViewMatrix,\n    ...maybeMaxIterationsUniform,\n    uColormap,\n    uJuliaConstant,\n    vertexPositionBuffer\n  }\n}\n\nconst initShaders = () => {\n  const vertexShaderSource = isWebGL2() ? vertexShaderSourceWebGL2 : vertexShaderSourceWebGL1\n  const mandelbrotShaderSource = isWebGL2() ? mandelbrotShaderSourceWebGL2 : mandelbrotShaderSourceWebGL1\n  const juliaShaderSource = isWebGL2() ? juliaShaderSourceWebGL2 : juliaShaderSourceWebGL1\n  const mandelbrotSet = initShadersHelper('Mandelbrot', vertexShaderSource, mandelbrotShaderSource)\n  const juliaSet = initShadersHelper('Julia', vertexShaderSource, juliaShaderSource)\n  fractalSets.set(FRACTAL_SET_ID_MANDELBROT, mandelbrotSet)\n  fractalSets.set(FRACTAL_SET_ID_JULIA, juliaSet)\n}\n\nconst setCurrentFractalSet = (fractalSetId, juliaConstant, colourMapId) => {\n\n  if (Number.isInteger(fractalSetId)) {\n    currentFractalSetId = fractalSetId\n    currentFractalSet = fractalSets.get(fractalSetId)\n  }\n\n  if (juliaConstant) {\n    currentJuliaConstant = juliaConstant\n  }\n  if (!currentJuliaConstant) {\n    currentJuliaConstant = { x: 0, y: 0 }\n  }\n\n  if (Number.isInteger(colourMapId)) {\n    currentColourMapId = colourMapId\n    currentColourMap = colourMaps.get(colourMapId)\n  }\n\n  gl.useProgram(currentFractalSet.program)\n\n  const modelViewMatrix = glm.mat4.create()\n  glm.mat4.fromScaling(modelViewMatrix, [1, -1, 1])\n  gl.uniformMatrix4fv(currentFractalSet.uModelViewMatrix, false, modelViewMatrix)\n\n  gl.uniform1i(currentFractalSet.uColormap, currentColourMap.textureUnit)\n  gl.uniform2f(currentFractalSet.uJuliaConstant, currentJuliaConstant.x, currentJuliaConstant.y)\n\n  setCanvasAndViewportSize()\n\n  render()\n}\n\nconst render = () => {\n  const corners = [\n    regionTopRight.x, regionTopRight.y,\n    regionBottomLeft.x, regionTopRight.y,\n    regionTopRight.x, regionBottomLeft.y,\n    regionBottomLeft.x, regionBottomLeft.y\n  ]\n  const plotPositionBuffer = gl.createBuffer()\n  gl.bindBuffer(gl.ARRAY_BUFFER, plotPositionBuffer)\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(corners), gl.STATIC_DRAW)\n  gl.vertexAttribPointer(currentFractalSet.aPlotPosition, 2, gl.FLOAT, false, 0, 0)\n  if (isWebGL2()) {\n    gl.uniform1i(currentFractalSet.uMaxIterations, currentMaxIterations)\n  }\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\n  gl.deleteBuffer(plotPositionBuffer)\n}\n\nconst displayConfiguration = async configuration => {\n  switchToBookmark(configuration)\n  const message = {\n    type: 'chooseConfiguration',\n    fractalSetIds: [FRACTAL_SET_ID_MANDELBROT, FRACTAL_SET_ID_JULIA],\n    colorMapIds: Array.from(colourMaps.keys())\n  }\n  const newConfiguration = await promiseWorker.postMessage(message)\n  setTimeout(displayConfiguration, 10000, newConfiguration)\n}\n\nconst start = async manualMode => {\n\n  if ('serviceWorker' in navigator) {\n    try {\n      const registration = await navigator.serviceWorker.register('service-worker.js')\n      console.log('Successfully registered service worker', registration)\n    } catch (error) {\n      console.error(`Failed to register service worker: ${error.message}`)\n    }\n  }\n\n  canvas = document.getElementById('canvas')\n\n  initGL(canvas)\n  initShaders()\n  loadColourMaps()\n\n  window.addEventListener('resize', onWindowResize)\n\n  if (manualMode) {\n    canvas.addEventListener('mousedown', onCanvasMouseDownHandler)\n    canvas.addEventListener('mousemove', onCanvasMouseMoveHandler)\n    canvas.addEventListener('mouseup', onCanvasMouseUpHandler)\n    canvas.addEventListener('mouseleave', onCanvasMouseLeaveHandler)\n    document.addEventListener('keydown', onDocumentKeyDownHandler)\n    bookmarks = loadBookmarks()\n    nextBookmarkId = bookmarks.size ? Math.max(...bookmarks.keys()) + 1 : 0\n    switchToBookmark(INITIAL_BOOKMARK)\n  } else {\n    displayConfiguration(INITIAL_BOOKMARK)\n    const animate = () => {\n      panRegion(0.01)\n      zoomRegion(0.01)\n      render()\n      requestAnimationFrame(animate)\n    }\n    animate()\n  }\n}\n\nconst adjustRegionAspectRatio = (canvasWidth, canvasHeight) => {\n\n  const regionWidth = regionTopRight.x - regionBottomLeft.x\n  const regionHeight = regionTopRight.y - regionBottomLeft.y\n\n  if (canvasWidth > canvasHeight) {\n    const widthDelta = canvasWidth / canvasHeight * regionHeight - regionWidth\n    const widthDeltaHalf = widthDelta / 2\n    regionBottomLeft.x -= widthDeltaHalf\n    regionTopRight.x += widthDeltaHalf\n  }\n\n  if (canvasWidth < canvasHeight) {\n    const heightDelta = canvasHeight / canvasWidth * regionWidth - regionHeight\n    const heightDeltaHalf = heightDelta / 2\n    regionBottomLeft.y -= heightDeltaHalf\n    regionTopRight.y += heightDeltaHalf\n  }\n}\n\nconst panRegion = percent => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x\n  const regionHeight = regionTopRight.y - regionBottomLeft.y\n  const widthDelta = regionWidth / 100 * percent\n  const heightDelta = regionHeight / 100 * percent\n  regionBottomLeft.x -= widthDelta\n  regionBottomLeft.y -= heightDelta\n  regionTopRight.x -= widthDelta\n  regionTopRight.y -= heightDelta\n}\n\nconst zoomRegion = percent => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x\n  const regionHeight = regionTopRight.y - regionBottomLeft.y\n  const widthDelta = regionWidth / 100 * percent\n  const widthDeltaHalf = widthDelta / 2\n  const heightDelta = regionHeight / 100 * percent\n  const heightDeltaHalf = heightDelta / 2\n  regionBottomLeft.x += widthDeltaHalf\n  regionBottomLeft.y += heightDeltaHalf\n  regionTopRight.x -= widthDeltaHalf\n  regionTopRight.y -= heightDeltaHalf\n}\n\nconst setCanvasAndViewportSize = () => {\n  canvas.width = canvas.clientWidth\n  canvas.height = canvas.clientHeight\n  gl.viewport(0, 0, canvas.width, canvas.height)\n  adjustRegionAspectRatio(canvas.width, canvas.height)\n}\n\nconst onWindowResize = () => {\n  setCanvasAndViewportSize()\n  render()\n}\n\nconst mouseToRegion = (mouseX, mouseY) => {\n  const regionWidth = regionTopRight.x - regionBottomLeft.x\n  const regionHeight = regionTopRight.y - regionBottomLeft.y\n  return {\n    regionMouseX: regionBottomLeft.x + mouseX * regionWidth / canvas.width,\n    regionMouseY: regionBottomLeft.y + mouseY * regionHeight / canvas.height\n  }\n}\n\nconst onCanvasMouseDownHandler = e => {\n\n  const mouseX = e.offsetX\n  const mouseY = e.offsetY\n  const { regionMouseX, regionMouseY } = mouseToRegion(mouseX, mouseY)\n\n  if (e.shiftKey) {\n    const regionWidth = regionTopRight.x - regionBottomLeft.x\n    const regionHeight = regionTopRight.y - regionBottomLeft.y\n    const regionCentreX = regionBottomLeft.x + regionWidth / 2\n    const regionCentreY = regionBottomLeft.y + regionHeight / 2\n    const translationX = regionMouseX - regionCentreX\n    const translationY = regionMouseY - regionCentreY\n    regionBottomLeft.x += translationX\n    regionBottomLeft.y += translationY\n    regionTopRight.x += translationX\n    regionTopRight.y += translationY\n    return render()\n  }\n\n  if (e.altKey) {\n    switch (currentFractalSetId) {\n      case FRACTAL_SET_ID_MANDELBROT:\n        return setCurrentFractalSet(FRACTAL_SET_ID_JULIA, { x: regionMouseX, y: regionMouseY })\n\n      case FRACTAL_SET_ID_JULIA:\n        return setCurrentFractalSet(FRACTAL_SET_ID_MANDELBROT)\n\n      default:\n        return\n    }\n  }\n\n  panning = true\n  lastMousePt = { mouseX, mouseY }\n}\n\nconst onCanvasMouseMoveHandler = e => {\n\n  if (!panning) {\n    return\n  }\n\n  const mouseX = e.offsetX\n  const mouseY = e.offsetY\n  const mouseDeltaX = mouseX - lastMousePt.mouseX\n  const mouseDeltaY = mouseY - lastMousePt.mouseY\n  const regionWidth = regionTopRight.x - regionBottomLeft.x\n  const regionHeight = regionTopRight.y - regionBottomLeft.y\n  const regionDeltaX = mouseDeltaX * regionWidth / canvas.width\n  const regionDeltaY = mouseDeltaY * regionHeight / canvas.height\n  regionBottomLeft.x -= regionDeltaX\n  regionBottomLeft.y -= regionDeltaY\n  regionTopRight.x -= regionDeltaX\n  regionTopRight.y -= regionDeltaY\n\n  render()\n\n  lastMousePt = { mouseX, mouseY }\n}\n\nconst onCanvasMouseUpHandler = () => {\n  panning = false\n}\n\nconst onCanvasMouseLeaveHandler = () => {\n  panning = false\n}\n\nconst onDocumentKeyDownHandler = e => {\n\n  if (bookmarkMode) {\n    return handleBookmarkKeys(e)\n  }\n\n  if (!bookmarkMode && e.key === 'b' && e.ctrlKey) {\n    bookmarkMode = true\n    return\n  }\n\n  if (e.key === '+') {\n    zoomRegion(50)\n    return render()\n  }\n\n  if (e.key === '-') {\n    zoomRegion(-100)\n    return render()\n  }\n\n  if (e.key === 'h' && e.ctrlKey) {\n    return switchToBookmark(HOME_BOOKMARK)\n  }\n\n  if ((e.key === 'c' || e.key === 'C') && e.ctrlKey) {\n    const keys = Array.from(colourMaps.keys())\n    const maxIndex = keys.length\n    const oldIndex = keys.indexOf(currentColourMapId)\n    const newIndex = (oldIndex + (e.shiftKey ? maxIndex - 1 : 1)) % maxIndex\n    const newColourMapId = keys[newIndex]\n    return setCurrentFractalSet(undefined, undefined, newColourMapId)\n  }\n\n  if (isWebGL2()) {\n    if ((e.key === 'i' || e.key === 'I')) {\n      const delta = C.DELTA_ITERATIONS * (e.shiftKey ? -1 : +1)\n      currentMaxIterations = currentMaxIterations + delta\n      currentMaxIterations = Math.min(currentMaxIterations, C.MAX_ITERATIONS)\n      currentMaxIterations = Math.max(currentMaxIterations, C.MIN_ITERATIONS)\n      return render()\n    }\n  }\n\n  if ((e.key === 'r' || e.key === 'R')) {\n    // TODO: choose a random region\n  }\n}\n\nconst handleBookmarkKeys = e => {\n\n  bookmarkMode = false\n\n  if (e.key === 'n') {\n    const bookmark = createBookmark()\n    return presentBookmarkModal(bookmark)\n  }\n\n  if (e.key === 'l') {\n    return presentManageBookmarksModal()\n  }\n}\n\nconst presentBookmarkModal = bookmark => {\n  const bookmarkModal = $('#bookmarkModal')\n  const hasId = Number.isInteger(bookmark.id)\n  const title = hasId ? 'Edit Bookmark' : 'Create Bookmark'\n  $('.modal-title', bookmarkModal).text(title)\n  $('input[type=\"submit\"]', bookmarkModal)\n    .off('click')\n    .on('click', e => {\n      e.preventDefault()\n      bookmark.name = $('#name', bookmarkModal).val()\n      if (!hasId) {\n        bookmark.id = nextBookmarkId++\n        bookmarks.set(bookmark.id, bookmark)\n      }\n      saveBookmarks(bookmarks)\n      bookmarkModal.modal('hide')\n    })\n  const thumbnailImg = $('img.thumbnail', bookmarkModal)\n  const thumbnailCanvas = $('canvas.thumbnail', bookmarkModal)\n  if (hasId) {\n    thumbnailCanvas.hide()\n    thumbnailImg.show()\n    thumbnailImg[0].src = bookmark.thumbnail\n  } else {\n    thumbnailImg.hide()\n    thumbnailCanvas.show()\n    const thumbnailCanvasElement = thumbnailCanvas[0]\n    const thumbnailCtx = thumbnailCanvasElement.getContext('2d')\n    const swidth = Math.min(canvas.width, canvas.height)\n    const sheight = Math.min(canvas.width, canvas.height)\n    const sx = (canvas.width - swidth) / 2\n    const sy = (canvas.height - sheight) / 2\n    const dwidth = thumbnailCanvasElement.width\n    const dheight = thumbnailCanvasElement.height\n    thumbnailCtx.drawImage(canvas, sx, sy, swidth, sheight, 0, 0, dwidth, dheight)\n    bookmark.thumbnail = thumbnailCanvasElement.toDataURL('image/jpeg', 1.0)\n  }\n  $('#name', bookmarkModal).val(bookmark.name).focus()\n  $('.fractal-set', bookmarkModal).text(fractalSets.get(bookmark.fractalSetId).name)\n  $('.colour-map', bookmarkModal).text(colourMaps.get(bookmark.colourMapId).name)\n  $('.max-iterations', bookmarkModal).text(bookmark.maxIterations)\n  $('.region-bottom-left', bookmarkModal).text(`(${bookmark.regionBottomLeft.x}, ${bookmark.regionBottomLeft.y})`)\n  $('.region-top-right', bookmarkModal).text(`(${bookmark.regionTopRight.x}, ${bookmark.regionTopRight.y})`)\n  const juliaConstantP = $('.julia-constant', bookmarkModal)\n  const juliaConstantDiv = juliaConstantP.closest('div')\n  if (bookmark.fractalSetId === FRACTAL_SET_ID_JULIA) {\n    juliaConstantP.text(`(${bookmark.juliaConstant.x}, ${bookmark.juliaConstant.y})`)\n    juliaConstantDiv.show()\n  } else {\n    juliaConstantDiv.hide()\n  }\n  bookmarkModal.modal()\n}\n\nconst presentManageBookmarksModal = () => {\n  const manageBookmarksModal = $('#manageBookmarksModal')\n  const tbody = $('tbody', manageBookmarksModal).empty()\n  const invokeHandler = (handler, bookmark) => () => {\n    manageBookmarksModal.modal('hide')\n    handler(bookmark)\n  }\n  const onSwitchTo = bookmark => switchToBookmark(bookmark)\n  const onEdit = bookmark => presentBookmarkModal(bookmark)\n  const onDelete = bookmark => {\n    bookmarks.delete(bookmark.id)\n    saveBookmarks(bookmarks)\n  }\n  const bookmarkRowTemplate = document.getElementById('bookmark-row-template')\n  bookmarks.forEach(bookmark => {\n    const tr = document.importNode(bookmarkRowTemplate.content, true)\n    const img = tr.querySelector(':nth-child(1) img')\n    const name = tr.querySelector(':nth-child(2)')\n    const editButton = tr.querySelector(':nth-child(3) i')\n    const deleteButton = tr.querySelector(':nth-child(4) i')\n    img.src = bookmark.thumbnail\n    name.innerText = bookmark.name\n    img.addEventListener('click', invokeHandler(onSwitchTo, bookmark))\n    editButton.addEventListener('click', invokeHandler(onEdit, bookmark))\n    deleteButton.addEventListener('click', invokeHandler(onDelete, bookmark))\n    tbody.append(tr)\n  })\n  manageBookmarksModal.modal()\n}\n\nconst createBookmark = name => ({\n  name: name || `Bookmark${nextBookmarkId}`,\n  fractalSetId: currentFractalSetId,\n  juliaConstant: { ...currentJuliaConstant },\n  colourMapId: currentColourMapId,\n  regionBottomLeft: { ...regionBottomLeft },\n  regionTopRight: { ...regionTopRight },\n  maxIterations: currentMaxIterations\n})\n\nconst switchToBookmark = bookmark => {\n  regionBottomLeft.x = bookmark.regionBottomLeft.x\n  regionBottomLeft.y = bookmark.regionBottomLeft.y\n  regionTopRight.x = bookmark.regionTopRight.x\n  regionTopRight.y = bookmark.regionTopRight.y\n  currentMaxIterations = bookmark.maxIterations\n  setCurrentFractalSet(bookmark.fractalSetId, bookmark.juliaConstant, bookmark.colourMapId)\n}\n\nconst loadBookmarks = () => {\n  return new Map(JSON.parse(localStorage.bookmarks || '[]'))\n}\n\nconst saveBookmarks = bookmarks => {\n  localStorage.bookmarks = JSON.stringify(Array.from(bookmarks.entries()))\n}\n\nconst url = new URL(document.location)\nconst manualMode = url.searchParams.get('mode') === 'manual'\n\nstart(manualMode)\n","module.exports = __webpack_public_path__ + \"0.bundle.worker.js\""],"sourceRoot":""}