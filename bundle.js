!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=19)}([function(t,n,e){"use strict";e.d(n,"b",(function(){return r})),e.d(n,"d",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));const r=128,o=16,a=256,i=16},function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));const r=[()=>0,()=>.5,()=>1,t=>t,t=>Math.pow(t,2),t=>Math.pow(t,3),t=>Math.pow(t,4),t=>Math.sqrt(t),t=>Math.sqrt(Math.sqrt(t)),t=>Math.sin(t*Math.PI/2),t=>Math.cos(t*Math.PI/2),t=>Math.abs(t-.5),t=>Math.pow(2*t-1,2),t=>Math.sin(t*Math.PI),t=>Math.abs(Math.cos(t*Math.PI)),t=>Math.sin(2*t*Math.PI),t=>Math.cos(2*t*Math.PI),t=>Math.abs(Math.sin(2*t*Math.PI)),t=>Math.abs(Math.cos(2*t*Math.PI)),t=>Math.abs(Math.sin(4*t*Math.PI)),t=>Math.abs(Math.cos(4*t*Math.PI)),t=>3*t,t=>3*t-1,t=>3*t-2,t=>Math.abs(3*t-1),t=>Math.abs(3*t-2),t=>(3*t-1)/2,t=>(3*t-2)/2,t=>Math.abs((3*t-1)/2),t=>Math.abs((3*t-2)/2),t=>t/.32-.78125,t=>2*t-.84,t=>t<.25?4*t:t<.92?-2*t+1.84:t/.08-11.5,t=>Math.abs(2*t-.5),t=>2*t,t=>2*t-.5,t=>2*t-1],o={jet:{usesFuncs:!1,red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]},hot:{usesFuncs:!1,red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]},gist_stern:{usesFuncs:!1,red:[[0,0,0],[.0547,1,1],[.25,.027,.25],[1,1,1]],green:[[0,0,0],[1,0,0]],blue:[[0,0,0],[.5,1,1],[.735,0,0],[1,0,0]]},gnuplot:{usesFuncs:!0,red:r[7],green:r[5],blue:r[15]},gnuplot2:{usesFuncs:!0,red:r[30],green:r[31],blue:r[32]},afmhot:{usesFuncs:!0,red:r[34],green:r[35],blue:r[36]}}},function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var r={};e.r(r),e.d(r,"create",(function(){return i})),e.d(r,"clone",(function(){return u})),e.d(r,"copy",(function(){return s})),e.d(r,"fromValues",(function(){return c})),e.d(r,"set",(function(){return l})),e.d(r,"identity",(function(){return f})),e.d(r,"transpose",(function(){return h})),e.d(r,"invert",(function(){return d})),e.d(r,"adjoint",(function(){return m})),e.d(r,"determinant",(function(){return M})),e.d(r,"multiply",(function(){return v})),e.d(r,"translate",(function(){return y})),e.d(r,"scale",(function(){return g})),e.d(r,"rotate",(function(){return p})),e.d(r,"rotateX",(function(){return x})),e.d(r,"rotateY",(function(){return b})),e.d(r,"rotateZ",(function(){return I})),e.d(r,"fromTranslation",(function(){return A})),e.d(r,"fromScaling",(function(){return T})),e.d(r,"fromRotation",(function(){return P})),e.d(r,"fromXRotation",(function(){return w})),e.d(r,"fromYRotation",(function(){return S})),e.d(r,"fromZRotation",(function(){return k})),e.d(r,"fromRotationTranslation",(function(){return R})),e.d(r,"fromQuat2",(function(){return E})),e.d(r,"getTranslation",(function(){return z})),e.d(r,"getScaling",(function(){return _})),e.d(r,"getRotation",(function(){return C})),e.d(r,"fromRotationTranslationScale",(function(){return L})),e.d(r,"fromRotationTranslationScaleOrigin",(function(){return F})),e.d(r,"fromQuat",(function(){return D})),e.d(r,"frustum",(function(){return O})),e.d(r,"perspective",(function(){return B})),e.d(r,"perspectiveFromFieldOfView",(function(){return N})),e.d(r,"ortho",(function(){return q})),e.d(r,"lookAt",(function(){return X})),e.d(r,"targetTo",(function(){return j})),e.d(r,"str",(function(){return U})),e.d(r,"frob",(function(){return $})),e.d(r,"add",(function(){return V})),e.d(r,"subtract",(function(){return Y})),e.d(r,"multiplyScalar",(function(){return J})),e.d(r,"multiplyScalarAndAdd",(function(){return G})),e.d(r,"exactEquals",(function(){return K})),e.d(r,"equals",(function(){return W})),e.d(r,"mul",(function(){return H})),e.d(r,"sub",(function(){return Q}));var o=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function i(){var t=new a(16);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t){var n=new a(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function s(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function c(t,n,e,r,o,i,u,s,c,l,f,h,d,m,M,v){var y=new a(16);return y[0]=t,y[1]=n,y[2]=e,y[3]=r,y[4]=o,y[5]=i,y[6]=u,y[7]=s,y[8]=c,y[9]=l,y[10]=f,y[11]=h,y[12]=d,y[13]=m,y[14]=M,y[15]=v,y}function l(t,n,e,r,o,a,i,u,s,c,l,f,h,d,m,M,v){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=m,t[14]=M,t[15]=v,t}function f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function h(t,n){if(t===n){var e=n[1],r=n[2],o=n[3],a=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=a,t[11]=n[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function d(t,n){var e=n[0],r=n[1],o=n[2],a=n[3],i=n[4],u=n[5],s=n[6],c=n[7],l=n[8],f=n[9],h=n[10],d=n[11],m=n[12],M=n[13],v=n[14],y=n[15],g=e*u-r*i,p=e*s-o*i,x=e*c-a*i,b=r*s-o*u,I=r*c-a*u,A=o*c-a*s,T=l*M-f*m,P=l*v-h*m,w=l*y-d*m,S=f*v-h*M,k=f*y-d*M,R=h*y-d*v,E=g*R-p*k+x*S+b*w-I*P+A*T;return E?(E=1/E,t[0]=(u*R-s*k+c*S)*E,t[1]=(o*k-r*R-a*S)*E,t[2]=(M*A-v*I+y*b)*E,t[3]=(h*I-f*A-d*b)*E,t[4]=(s*w-i*R-c*P)*E,t[5]=(e*R-o*w+a*P)*E,t[6]=(v*x-m*A-y*p)*E,t[7]=(l*A-h*x+d*p)*E,t[8]=(i*k-u*w+c*T)*E,t[9]=(r*w-e*k-a*T)*E,t[10]=(m*I-M*x+y*g)*E,t[11]=(f*x-l*I-d*g)*E,t[12]=(u*P-i*S-s*T)*E,t[13]=(e*S-r*P+o*T)*E,t[14]=(M*p-m*b-v*g)*E,t[15]=(l*b-f*p+h*g)*E,t):null}function m(t,n){var e=n[0],r=n[1],o=n[2],a=n[3],i=n[4],u=n[5],s=n[6],c=n[7],l=n[8],f=n[9],h=n[10],d=n[11],m=n[12],M=n[13],v=n[14],y=n[15];return t[0]=u*(h*y-d*v)-f*(s*y-c*v)+M*(s*d-c*h),t[1]=-(r*(h*y-d*v)-f*(o*y-a*v)+M*(o*d-a*h)),t[2]=r*(s*y-c*v)-u*(o*y-a*v)+M*(o*c-a*s),t[3]=-(r*(s*d-c*h)-u*(o*d-a*h)+f*(o*c-a*s)),t[4]=-(i*(h*y-d*v)-l*(s*y-c*v)+m*(s*d-c*h)),t[5]=e*(h*y-d*v)-l*(o*y-a*v)+m*(o*d-a*h),t[6]=-(e*(s*y-c*v)-i*(o*y-a*v)+m*(o*c-a*s)),t[7]=e*(s*d-c*h)-i*(o*d-a*h)+l*(o*c-a*s),t[8]=i*(f*y-d*M)-l*(u*y-c*M)+m*(u*d-c*f),t[9]=-(e*(f*y-d*M)-l*(r*y-a*M)+m*(r*d-a*f)),t[10]=e*(u*y-c*M)-i*(r*y-a*M)+m*(r*c-a*u),t[11]=-(e*(u*d-c*f)-i*(r*d-a*f)+l*(r*c-a*u)),t[12]=-(i*(f*v-h*M)-l*(u*v-s*M)+m*(u*h-s*f)),t[13]=e*(f*v-h*M)-l*(r*v-o*M)+m*(r*h-o*f),t[14]=-(e*(u*v-s*M)-i*(r*v-o*M)+m*(r*s-o*u)),t[15]=e*(u*h-s*f)-i*(r*h-o*f)+l*(r*s-o*u),t}function M(t){var n=t[0],e=t[1],r=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],m=t[13],M=t[14],v=t[15];return(n*i-e*a)*(f*v-h*M)-(n*u-r*a)*(l*v-h*m)+(n*s-o*a)*(l*M-f*m)+(e*u-r*i)*(c*v-h*d)-(e*s-o*i)*(c*M-f*d)+(r*s-o*u)*(c*m-l*d)}function v(t,n,e){var r=n[0],o=n[1],a=n[2],i=n[3],u=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=n[9],d=n[10],m=n[11],M=n[12],v=n[13],y=n[14],g=n[15],p=e[0],x=e[1],b=e[2],I=e[3];return t[0]=p*r+x*u+b*f+I*M,t[1]=p*o+x*s+b*h+I*v,t[2]=p*a+x*c+b*d+I*y,t[3]=p*i+x*l+b*m+I*g,p=e[4],x=e[5],b=e[6],I=e[7],t[4]=p*r+x*u+b*f+I*M,t[5]=p*o+x*s+b*h+I*v,t[6]=p*a+x*c+b*d+I*y,t[7]=p*i+x*l+b*m+I*g,p=e[8],x=e[9],b=e[10],I=e[11],t[8]=p*r+x*u+b*f+I*M,t[9]=p*o+x*s+b*h+I*v,t[10]=p*a+x*c+b*d+I*y,t[11]=p*i+x*l+b*m+I*g,p=e[12],x=e[13],b=e[14],I=e[15],t[12]=p*r+x*u+b*f+I*M,t[13]=p*o+x*s+b*h+I*v,t[14]=p*a+x*c+b*d+I*y,t[15]=p*i+x*l+b*m+I*g,t}function y(t,n,e){var r,o,a,i,u,s,c,l,f,h,d,m,M=e[0],v=e[1],y=e[2];return n===t?(t[12]=n[0]*M+n[4]*v+n[8]*y+n[12],t[13]=n[1]*M+n[5]*v+n[9]*y+n[13],t[14]=n[2]*M+n[6]*v+n[10]*y+n[14],t[15]=n[3]*M+n[7]*v+n[11]*y+n[15]):(r=n[0],o=n[1],a=n[2],i=n[3],u=n[4],s=n[5],c=n[6],l=n[7],f=n[8],h=n[9],d=n[10],m=n[11],t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=m,t[12]=r*M+u*v+f*y+n[12],t[13]=o*M+s*v+h*y+n[13],t[14]=a*M+c*v+d*y+n[14],t[15]=i*M+l*v+m*y+n[15]),t}function g(t,n,e){var r=e[0],o=e[1],a=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function p(t,n,e,r){var a,i,u,s,c,l,f,h,d,m,M,v,y,g,p,x,b,I,A,T,P,w,S,k,R=r[0],E=r[1],z=r[2],_=Math.hypot(R,E,z);return _<o?null:(R*=_=1/_,E*=_,z*=_,a=Math.sin(e),u=1-(i=Math.cos(e)),s=n[0],c=n[1],l=n[2],f=n[3],h=n[4],d=n[5],m=n[6],M=n[7],v=n[8],y=n[9],g=n[10],p=n[11],x=R*R*u+i,b=E*R*u+z*a,I=z*R*u-E*a,A=R*E*u-z*a,T=E*E*u+i,P=z*E*u+R*a,w=R*z*u+E*a,S=E*z*u-R*a,k=z*z*u+i,t[0]=s*x+h*b+v*I,t[1]=c*x+d*b+y*I,t[2]=l*x+m*b+g*I,t[3]=f*x+M*b+p*I,t[4]=s*A+h*T+v*P,t[5]=c*A+d*T+y*P,t[6]=l*A+m*T+g*P,t[7]=f*A+M*T+p*P,t[8]=s*w+h*S+v*k,t[9]=c*w+d*S+y*k,t[10]=l*w+m*S+g*k,t[11]=f*w+M*S+p*k,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function x(t,n,e){var r=Math.sin(e),o=Math.cos(e),a=n[4],i=n[5],u=n[6],s=n[7],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=u*o+f*r,t[7]=s*o+h*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=f*o-u*r,t[11]=h*o-s*r,t}function b(t,n,e){var r=Math.sin(e),o=Math.cos(e),a=n[0],i=n[1],u=n[2],s=n[3],c=n[8],l=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=u*o-f*r,t[3]=s*o-h*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=u*r+f*o,t[11]=s*r+h*o,t}function I(t,n,e){var r=Math.sin(e),o=Math.cos(e),a=n[0],i=n[1],u=n[2],s=n[3],c=n[4],l=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=u*o+f*r,t[3]=s*o+h*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=f*o-u*r,t[7]=h*o-s*r,t}function A(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function T(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,n,e){var r,a,i,u=e[0],s=e[1],c=e[2],l=Math.hypot(u,s,c);return l<o?null:(u*=l=1/l,s*=l,c*=l,r=Math.sin(n),i=1-(a=Math.cos(n)),t[0]=u*u*i+a,t[1]=s*u*i+c*r,t[2]=c*u*i-s*r,t[3]=0,t[4]=u*s*i-c*r,t[5]=s*s*i+a,t[6]=c*s*i+u*r,t[7]=0,t[8]=u*c*i+s*r,t[9]=s*c*i-u*r,t[10]=c*c*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function w(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,n,e){var r=n[0],o=n[1],a=n[2],i=n[3],u=r+r,s=o+o,c=a+a,l=r*u,f=r*s,h=r*c,d=o*s,m=o*c,M=a*c,v=i*u,y=i*s,g=i*c;return t[0]=1-(d+M),t[1]=f+g,t[2]=h-y,t[3]=0,t[4]=f-g,t[5]=1-(l+M),t[6]=m+v,t[7]=0,t[8]=h+y,t[9]=m-v,t[10]=1-(l+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function E(t,n){var e=new a(3),r=-n[0],o=-n[1],i=-n[2],u=n[3],s=n[4],c=n[5],l=n[6],f=n[7],h=r*r+o*o+i*i+u*u;return h>0?(e[0]=2*(s*u+f*r+c*i-l*o)/h,e[1]=2*(c*u+f*o+l*r-s*i)/h,e[2]=2*(l*u+f*i+s*o-c*r)/h):(e[0]=2*(s*u+f*r+c*i-l*o),e[1]=2*(c*u+f*o+l*r-s*i),e[2]=2*(l*u+f*i+s*o-c*r)),R(t,n,e),t}function z(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function _(t,n){var e=n[0],r=n[1],o=n[2],a=n[4],i=n[5],u=n[6],s=n[8],c=n[9],l=n[10];return t[0]=Math.hypot(e,r,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,l),t}function C(t,n){var e=new a(3);_(e,n);var r=1/e[0],o=1/e[1],i=1/e[2],u=n[0]*r,s=n[1]*o,c=n[2]*i,l=n[4]*r,f=n[5]*o,h=n[6]*i,d=n[8]*r,m=n[9]*o,M=n[10]*i,v=u+f+M,y=0;return v>0?(y=2*Math.sqrt(v+1),t[3]=.25*y,t[0]=(h-m)/y,t[1]=(d-c)/y,t[2]=(s-l)/y):u>f&&u>M?(y=2*Math.sqrt(1+u-f-M),t[3]=(h-m)/y,t[0]=.25*y,t[1]=(s+l)/y,t[2]=(d+c)/y):f>M?(y=2*Math.sqrt(1+f-u-M),t[3]=(d-c)/y,t[0]=(s+l)/y,t[1]=.25*y,t[2]=(h+m)/y):(y=2*Math.sqrt(1+M-u-f),t[3]=(s-l)/y,t[0]=(d+c)/y,t[1]=(h+m)/y,t[2]=.25*y),t}function L(t,n,e,r){var o=n[0],a=n[1],i=n[2],u=n[3],s=o+o,c=a+a,l=i+i,f=o*s,h=o*c,d=o*l,m=a*c,M=a*l,v=i*l,y=u*s,g=u*c,p=u*l,x=r[0],b=r[1],I=r[2];return t[0]=(1-(m+v))*x,t[1]=(h+p)*x,t[2]=(d-g)*x,t[3]=0,t[4]=(h-p)*b,t[5]=(1-(f+v))*b,t[6]=(M+y)*b,t[7]=0,t[8]=(d+g)*I,t[9]=(M-y)*I,t[10]=(1-(f+m))*I,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function F(t,n,e,r,o){var a=n[0],i=n[1],u=n[2],s=n[3],c=a+a,l=i+i,f=u+u,h=a*c,d=a*l,m=a*f,M=i*l,v=i*f,y=u*f,g=s*c,p=s*l,x=s*f,b=r[0],I=r[1],A=r[2],T=o[0],P=o[1],w=o[2],S=(1-(M+y))*b,k=(d+x)*b,R=(m-p)*b,E=(d-x)*I,z=(1-(h+y))*I,_=(v+g)*I,C=(m+p)*A,L=(v-g)*A,F=(1-(h+M))*A;return t[0]=S,t[1]=k,t[2]=R,t[3]=0,t[4]=E,t[5]=z,t[6]=_,t[7]=0,t[8]=C,t[9]=L,t[10]=F,t[11]=0,t[12]=e[0]+T-(S*T+E*P+C*w),t[13]=e[1]+P-(k*T+z*P+L*w),t[14]=e[2]+w-(R*T+_*P+F*w),t[15]=1,t}function D(t,n){var e=n[0],r=n[1],o=n[2],a=n[3],i=e+e,u=r+r,s=o+o,c=e*i,l=r*i,f=r*u,h=o*i,d=o*u,m=o*s,M=a*i,v=a*u,y=a*s;return t[0]=1-f-m,t[1]=l+y,t[2]=h-v,t[3]=0,t[4]=l-y,t[5]=1-c-m,t[6]=d+M,t[7]=0,t[8]=h+v,t[9]=d-M,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,n,e,r,o,a,i){var u=1/(e-n),s=1/(o-r),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(o+r)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t}function B(t,n,e,r,o){var a,i=1/Math.tan(n/2);return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=(o+r)*a,t[14]=2*o*r*a):(t[10]=-1,t[14]=-2*r),t}function N(t,n,e,r){var o=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function q(t,n,e,r,o,a,i){var u=1/(n-e),s=1/(r-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*u,t[13]=(o+r)*s,t[14]=(i+a)*c,t[15]=1,t}function X(t,n,e,r){var a,i,u,s,c,l,h,d,m,M,v=n[0],y=n[1],g=n[2],p=r[0],x=r[1],b=r[2],I=e[0],A=e[1],T=e[2];return Math.abs(v-I)<o&&Math.abs(y-A)<o&&Math.abs(g-T)<o?f(t):(h=v-I,d=y-A,m=g-T,a=x*(m*=M=1/Math.hypot(h,d,m))-b*(d*=M),i=b*(h*=M)-p*m,u=p*d-x*h,(M=Math.hypot(a,i,u))?(a*=M=1/M,i*=M,u*=M):(a=0,i=0,u=0),s=d*u-m*i,c=m*a-h*u,l=h*i-d*a,(M=Math.hypot(s,c,l))?(s*=M=1/M,c*=M,l*=M):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=l,t[10]=m,t[11]=0,t[12]=-(a*v+i*y+u*g),t[13]=-(s*v+c*y+l*g),t[14]=-(h*v+d*y+m*g),t[15]=1,t)}function j(t,n,e,r){var o=n[0],a=n[1],i=n[2],u=r[0],s=r[1],c=r[2],l=o-e[0],f=a-e[1],h=i-e[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var m=s*h-c*f,M=c*l-u*h,v=u*f-s*l;return(d=m*m+M*M+v*v)>0&&(m*=d=1/Math.sqrt(d),M*=d,v*=d),t[0]=m,t[1]=M,t[2]=v,t[3]=0,t[4]=f*v-h*M,t[5]=h*m-l*v,t[6]=l*M-f*m,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function U(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function $(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function V(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function Y(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function J(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function G(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function K(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function W(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],m=t[11],M=t[12],v=t[13],y=t[14],g=t[15],p=n[0],x=n[1],b=n[2],I=n[3],A=n[4],T=n[5],P=n[6],w=n[7],S=n[8],k=n[9],R=n[10],E=n[11],z=n[12],_=n[13],C=n[14],L=n[15];return Math.abs(e-p)<=o*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(r-x)<=o*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-b)<=o*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(i-I)<=o*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(u-A)<=o*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(s-T)<=o*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(c-P)<=o*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(l-w)<=o*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(f-S)<=o*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(h-k)<=o*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-R)<=o*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(m-E)<=o*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(M-z)<=o*Math.max(1,Math.abs(M),Math.abs(z))&&Math.abs(v-_)<=o*Math.max(1,Math.abs(v),Math.abs(_))&&Math.abs(y-C)<=o*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-L)<=o*Math.max(1,Math.abs(g),Math.abs(L))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var H=v,Q=Y},function(t,n,e){"use strict";var r=0;function o(t,n){var e=n.data;if(Array.isArray(e)&&!(e.length<2)){var r=e[0],o=e[1],a=e[2],i=t._callbacks[r];i&&(delete t._callbacks[r],i(o,a))}}function a(t){var n=this;n._worker=t,n._callbacks={},t.addEventListener("message",(function(t){o(n,t)}))}a.prototype.postMessage=function(t){var n=this,e=r++,a=[e,t];return new Promise((function(t,r){if(n._callbacks[e]=function(n,e){if(n)return r(new Error(n.message));t(e)},void 0!==n._worker.controller){var i=new MessageChannel;i.port1.onmessage=function(t){o(n,t)},n._worker.controller.postMessage(a,[i.port2])}else n._worker.postMessage(a)}))},t.exports=a},function(t,n){t.exports="precision highp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aPlotPosition;\nuniform mat4 uModelViewMatrix;\nvarying vec2 vPosition;\n\nvoid main(void) {\n  gl_Position = uModelViewMatrix * vec4(aVertexPosition, 0, 1);\n  vPosition = aPlotPosition;\n}\n"},function(t,n){t.exports="precision highp float;\n\n// Same value as INITIAL_ITERATIONS in constants.js\nconst int MAX_ITERATIONS = 128;\n\nvec4 loop(sampler2D colormap, vec2 z, vec2 c) {\n  int iteration = MAX_ITERATIONS;\n  for (int i = 0; i < MAX_ITERATIONS; i++) {\n    if (dot(z, z) >= 4.0) {\n      iteration = i;\n      break;\n    }\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\n    z = zSquared + c;\n  }\n  float s = float(iteration) / float(MAX_ITERATIONS + 1);\n  float t = 0.0;\n  vec2 coord = vec2(s, t);\n  return texture2D(colormap, coord);\n}\n\n\nuniform sampler2D uColormap;\nvarying vec2 vPosition;\n\nvoid main(void) {\n  vec2 z;\n  vec2 c = vPosition;\n  gl_FragColor = loop(uColormap, z, c);\n}\n"},function(t,n){t.exports="precision highp float;\n\n// Same value as INITIAL_ITERATIONS in constants.js\nconst int MAX_ITERATIONS = 128;\n\nvec4 loop(sampler2D colormap, vec2 z, vec2 c) {\n  int iteration = MAX_ITERATIONS;\n  for (int i = 0; i < MAX_ITERATIONS; i++) {\n    if (dot(z, z) >= 4.0) {\n      iteration = i;\n      break;\n    }\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\n    z = zSquared + c;\n  }\n  float s = float(iteration) / float(MAX_ITERATIONS + 1);\n  float t = 0.0;\n  vec2 coord = vec2(s, t);\n  return texture2D(colormap, coord);\n}\n\n\nuniform sampler2D uColormap;\nuniform vec2 uJuliaConstant;\nvarying vec2 vPosition;\n\nvoid main(void) {\n  vec2 z = vPosition;\n  vec2 c = uJuliaConstant;\n  gl_FragColor = loop(uColormap, z, c);\n}\n"},function(t,n){t.exports="#version 300 es\nprecision highp float;\n\nin vec2 aVertexPosition;\nin vec2 aPlotPosition;\nuniform mat4 uModelViewMatrix;\nout vec2 vPosition;\n\nvoid main(void) {\n  gl_Position = uModelViewMatrix * vec4(aVertexPosition, 0, 1);\n  vPosition = aPlotPosition;\n}\n"},function(t,n){t.exports="#version 300 es\nprecision highp float;\n\nvec4 loop(int maxIterations, sampler2D colormap, vec2 z, vec2 c) {\n  int iteration = 0;\n  while (iteration < maxIterations) {\n    if (dot(z, z) >= 4.0) break;\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\n    z = zSquared + c;\n    iteration++;\n  }\n  int s = 255 * iteration / maxIterations;\n  int t = 0;\n  ivec2 coord = ivec2(s, t);\n  int lod = 0;\n  return texelFetch(colormap, coord, lod);\n}\n\n\nuniform int uMaxIterations;\nuniform sampler2D uColormap;\nin vec2 vPosition;\nout vec4 fragColor;\n\nvoid main(void) {\n  vec2 z;\n  vec2 c = vPosition;\n  fragColor = loop(uMaxIterations, uColormap, z, c);\n}\n"},function(t,n){t.exports="#version 300 es\nprecision highp float;\n\nvec4 loop(int maxIterations, sampler2D colormap, vec2 z, vec2 c) {\n  int iteration = 0;\n  while (iteration < maxIterations) {\n    if (dot(z, z) >= 4.0) break;\n    vec2 zSquared = vec2(z.x * z.x - z.y * z.y, 2.0 * z.x * z.y);\n    z = zSquared + c;\n    iteration++;\n  }\n  int s = 255 * iteration / maxIterations;\n  int t = 0;\n  ivec2 coord = ivec2(s, t);\n  int lod = 0;\n  return texelFetch(colormap, coord, lod);\n}\n\n\nuniform int uMaxIterations;\nuniform sampler2D uColormap;\nuniform vec2 uJuliaConstant;\nin vec2 vPosition;\nout vec4 fragColor;\n\nvoid main(void) {\n  vec2 z = vPosition;\n  vec2 c = uJuliaConstant;\n  fragColor = loop(uMaxIterations, uColormap, z, c);\n}\n"},function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var r=e(1);const o=t=>t.reduce((t,n)=>t.concat(n),[]),a=o(Array(252).fill([1,1,1,1]).concat(Array(4).fill([0,0,0,1]))),i=t=>{const n=r.a[t];if(n)return u(n,256);switch(t){case"monochrome":return a;default:return console.error(`ERROR: unknown colour map name, '${t}'.`),a}},u=(t,n)=>{const e=t.usesFuncs?f:c,r=e(n,t.red),a=e(n,t.green),i=e(n,t.blue);return o(s(n,r,a,i))},s=(t,n,e,r)=>{const o=Array(t);for(let a=0;a<t;a++)o[a]=[n[a],e[a],r[a],1];return o},c=(t,n)=>{let e=n.map(t=>t[0]);const r=n.map(t=>t[1]),o=n.map(t=>t[2]);e=e.map(n=>n*(t-1));const a=new Array(t).fill(0),i=Array.from(Array(t).keys());let u=l(e,i);u=u.slice(1,u.length-1);const s=Array.from(Array(t-2).keys()).map(t=>(i[t+1]-e[u[t]-1])/(e[u[t]]-e[u[t]-1]));return Array.from(Array(t-2).keys()).forEach(t=>a[t+1]=s[t]*(r[u[t]]-o[u[t]-1])+o[u[t]-1]),a[0]=o[0],a[t-1]=r[r.length-1],a.map(d)},l=(t,n)=>{const e=Array(n.length),r=t.length;for(let o=0;o<n.length;o++){const a=n[o];let i=!1;for(let n=0;n<r;n++)if(a<=t[n]){e[o]=n,i=!0;break}i||(e[o]=r)}return e},f=(t,n)=>h(t,0,1).map(n).map(d),h=(t,n,e)=>{const r=(e-n)/(t-1),o=Array(t);for(let t=0;t<o.length;t++)o[t]=n+t*r;return o[o.length-1]=e,o},d=t=>m(0,1,t),m=(t,n,e)=>e<t?t:e>n?n:e},,,,,,,,,function(t,n,e){"use strict";e.r(n),function(t){var n=e(3),r=e.n(n),o=e(2),a=e(4),i=e.n(a),u=e(5),s=e.n(u),c=e(6),l=e.n(c),f=e(7),h=e.n(f),d=e(8),m=e.n(d),M=e(9),v=e.n(M),y=e(1),g=e(10),p=e(0);const x=new Worker(t,void 0),b=new r.a(x);let I,A;const T=(t,n)=>{const e=Object(g.a)(t);return((t,n)=>{const e=A.createTexture();A.activeTexture(A.TEXTURE0+n),A.bindTexture(A.TEXTURE_2D,e),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST);const r=new Uint8Array(t.map(t=>255*t)),o=t.length/4;A.texImage2D(A.TEXTURE_2D,0,A.RGBA,o,1,0,A.RGBA,A.UNSIGNED_BYTE,r)})(e,n),{name:t,colourMap:e,textureUnit:n}},P=new Map,w=new Map;let S,k=p.b,R=void 0,E=void 0,z=void 0,_=void 0,C=void 0,L={},F={},D=!1;const O={fractalSetId:0,juliaConstant:{x:0,y:0},colourMapId:0,regionBottomLeft:{x:-.22,y:-.7},regionTopRight:{x:-.21,y:-.69},maxIterations:p.b},B={fractalSetId:0,juliaConstant:{x:0,y:0},colourMapId:0,regionBottomLeft:{x:-2.25,y:-1.5},regionTopRight:{x:.75,y:1.5},maxIterations:p.b};let N=!1,q=0,X=new Map;const j=()=>A instanceof WebGL2RenderingContext,U=(t,n,e)=>{const r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const n=t.getShaderInfoLog(r);return console.error("Failed to compile shader: "+n),null}return r},V=(t,n,e)=>{const r=U(A,n,A.VERTEX_SHADER),o=U(A,e,A.FRAGMENT_SHADER),a=A.createProgram();if(A.attachShader(a,r),A.attachShader(a,o),A.linkProgram(a),!A.getProgramParameter(a,A.LINK_STATUS)){const t=A.getProgramInfoLog(a);return void console.error("Could not initialise shaders: "+t)}const i=A.getAttribLocation(a,"aVertexPosition");A.enableVertexAttribArray(i);const u=A.getAttribLocation(a,"aPlotPosition");A.enableVertexAttribArray(u);const s=A.getUniformLocation(a,"uModelViewMatrix"),c=A.getUniformLocation(a,"uColormap"),l=A.getUniformLocation(a,"uJuliaConstant"),f=j()?{uMaxIterations:A.getUniformLocation(a,"uMaxIterations")}:void 0,h=A.createBuffer();return A.bindBuffer(A.ARRAY_BUFFER,h),A.bufferData(A.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),A.STATIC_DRAW),A.vertexAttribPointer(i,2,A.FLOAT,!1,0,0),{name:t,program:a,aVertexPosition:i,aPlotPosition:u,uModelViewMatrix:s,...f,uColormap:c,uJuliaConstant:l,vertexPositionBuffer:h}},Y=(t,n,e)=>{Number.isInteger(t)&&(R=t,E=P.get(t)),n&&(z=n),z||(z={x:0,y:0}),Number.isInteger(e)&&(_=e,C=w.get(e)),A.useProgram(E.program);const r=o.a.create();o.a.fromScaling(r,[1,-1,1]),A.uniformMatrix4fv(E.uModelViewMatrix,!1,r),A.uniform1i(E.uColormap,C.textureUnit),A.uniform2f(E.uJuliaConstant,z.x,z.y),H(),J()},J=()=>{const t=[F.x,F.y,L.x,F.y,F.x,L.y,L.x,L.y],n=A.createBuffer();A.bindBuffer(A.ARRAY_BUFFER,n),A.bufferData(A.ARRAY_BUFFER,new Float32Array(t),A.STATIC_DRAW),A.vertexAttribPointer(E.aPlotPosition,2,A.FLOAT,!1,0,0),j()&&A.uniform1i(E.uMaxIterations,k),A.drawArrays(A.TRIANGLE_STRIP,0,4),A.deleteBuffer(n)},G=async t=>{st(t);const n={type:"chooseConfiguration",fractalSetIds:[0,1],colorMapIds:Array.from(w.keys())},e=await b.postMessage(n);setTimeout(G,1e4,e)},K=t=>{const n=(F.x-L.x)/100*t,e=(F.y-L.y)/100*t;L.x-=n,L.y-=e,F.x-=n,F.y-=e},W=t=>{const n=(F.x-L.x)/100*t/2,e=(F.y-L.y)/100*t/2;L.x+=n,L.y+=e,F.x-=n,F.y-=e},H=()=>{I.width=I.clientWidth,I.height=I.clientHeight,A.viewport(0,0,I.width,I.height),((t,n)=>{const e=F.x-L.x,r=F.y-L.y;if(t>n){const o=(t/n*r-e)/2;L.x-=o,F.x+=o}if(t<n){const o=(n/t*e-r)/2;L.y-=o,F.y+=o}})(I.width,I.height)},Q=()=>{H(),J()},Z=t=>{const n=t.offsetX,e=t.offsetY,{regionMouseX:r,regionMouseY:o}=((t,n)=>{const e=F.x-L.x,r=F.y-L.y;return{regionMouseX:L.x+t*e/I.width,regionMouseY:L.y+n*r/I.height}})(n,e);if(t.shiftKey){const t=F.x-L.x,n=F.y-L.y,e=r-(L.x+t/2),a=o-(L.y+n/2);return L.x+=e,L.y+=a,F.x+=e,F.y+=a,J()}if(t.altKey)switch(R){case 0:return Y(1,{x:r,y:o});case 1:return Y(0);default:return}D=!0,S={mouseX:n,mouseY:e}},tt=t=>{if(!D)return;const n=t.offsetX,e=t.offsetY,r=n-S.mouseX,o=e-S.mouseY,a=F.x-L.x,i=F.y-L.y,u=r*a/I.width,s=o*i/I.height;L.x-=u,L.y-=s,F.x-=u,F.y-=s,J(),S={mouseX:n,mouseY:e}},nt=()=>{D=!1},et=()=>{D=!1},rt=t=>{if(N)return ot(t);if(N||"b"!==t.key||!t.ctrlKey){if("+"===t.key)return W(50),J();if("-"===t.key)return W(-100),J();if("h"===t.key&&t.ctrlKey)return st(B);if(("c"===t.key||"C"===t.key)&&t.ctrlKey){const n=Array.from(w.keys()),e=n.length,r=n.indexOf(_),o=n[(r+(t.shiftKey?e-1:1))%e];return Y(void 0,void 0,o)}if(j()&&("i"===t.key||"I"===t.key)){const n=p.a*(t.shiftKey?-1:1);return k+=n,k=Math.min(k,p.c),k=Math.max(k,p.d),J()}"r"===t.key||t.key}else N=!0},ot=t=>{if(N=!1,"n"===t.key){const t=ut();return at(t)}if("l"===t.key)return it()},at=t=>{const n=$("#bookmarkModal"),e=Number.isInteger(t.id),r=e?"Edit Bookmark":"Create Bookmark";$(".modal-title",n).text(r),$('input[type="submit"]',n).off("click").on("click",r=>{r.preventDefault(),t.name=$("#name",n).val(),e||(t.id=q++,X.set(t.id,t)),lt(X),n.modal("hide")});const o=$("img.thumbnail",n),a=$("canvas.thumbnail",n);if(e)a.hide(),o.show(),o[0].src=t.thumbnail;else{o.hide(),a.show();const n=a[0],e=n.getContext("2d"),r=Math.min(I.width,I.height),i=Math.min(I.width,I.height),u=(I.width-r)/2,s=(I.height-i)/2,c=n.width,l=n.height;e.drawImage(I,u,s,r,i,0,0,c,l),t.thumbnail=n.toDataURL("image/jpeg",1)}$("#name",n).val(t.name).focus(),$(".fractal-set",n).text(P.get(t.fractalSetId).name),$(".colour-map",n).text(w.get(t.colourMapId).name),$(".max-iterations",n).text(t.maxIterations),$(".region-bottom-left",n).text(`(${t.regionBottomLeft.x}, ${t.regionBottomLeft.y})`),$(".region-top-right",n).text(`(${t.regionTopRight.x}, ${t.regionTopRight.y})`);const i=$(".julia-constant",n),u=i.closest("div");1===t.fractalSetId?(i.text(`(${t.juliaConstant.x}, ${t.juliaConstant.y})`),u.show()):u.hide(),n.modal()},it=()=>{const t=$("#manageBookmarksModal"),n=$("tbody",t).empty(),e=(n,e)=>()=>{t.modal("hide"),n(e)},r=t=>st(t),o=t=>at(t),a=t=>{X.delete(t.id),lt(X)},i=document.getElementById("bookmark-row-template");X.forEach(t=>{const u=document.importNode(i.content,!0),s=u.querySelector(":nth-child(1) img"),c=u.querySelector(":nth-child(2)"),l=u.querySelector(":nth-child(3) i"),f=u.querySelector(":nth-child(4) i");s.src=t.thumbnail,c.innerText=t.name,s.addEventListener("click",e(r,t)),l.addEventListener("click",e(o,t)),f.addEventListener("click",e(a,t)),n.append(u)}),t.modal()},ut=t=>({name:t||"Bookmark"+q,fractalSetId:R,juliaConstant:{...z},colourMapId:_,regionBottomLeft:{...L},regionTopRight:{...F},maxIterations:k}),st=t=>{L.x=t.regionBottomLeft.x,L.y=t.regionBottomLeft.y,F.x=t.regionTopRight.x,F.y=t.regionTopRight.y,k=t.maxIterations,Y(t.fractalSetId,t.juliaConstant,t.colourMapId)},ct=()=>new Map(JSON.parse(localStorage.bookmarks||"[]")),lt=t=>{localStorage.bookmarks=JSON.stringify(Array.from(t.entries()))};(async t=>{if("serviceWorker"in navigator)try{const t=await navigator.serviceWorker.register("service-worker.js");console.log("Successfully registered service worker",t)}catch(t){console.error("Failed to register service worker: "+t.message)}if(I=document.getElementById("canvas"),(t=>{A=t.getContext("webgl"),A||console.error("Failed to initialise WebGL")})(I),(()=>{const t=j()?h.a:i.a,n=j()?m.a:s.a,e=j()?v.a:l.a,r=V("Mandelbrot",t,n),o=V("Julia",t,e);P.set(0,r),P.set(1,o)})(),Array.from(Object.keys(y.a)).forEach((t,n)=>{w.set(n,T(t,n))}),window.addEventListener("resize",Q),t)I.addEventListener("mousedown",Z),I.addEventListener("mousemove",tt),I.addEventListener("mouseup",nt),I.addEventListener("mouseleave",et),document.addEventListener("keydown",rt),X=ct(),q=X.size?Math.max(...X.keys())+1:0,st(O);else{G(O);const t=()=>{K(.01),W(.01),J(),requestAnimationFrame(t)};t()}})("manual"===new URL(document.location).searchParams.get("mode"))}.call(this,e(20))},function(t,n,e){t.exports=e.p+"0.bundle.worker.js"}]);
//# sourceMappingURL=bundle.js.map